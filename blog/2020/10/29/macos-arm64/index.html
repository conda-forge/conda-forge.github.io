<!doctype html>
<html lang="en" dir="ltr" class="blog-wrapper blog-post-page plugin-blog plugin-id-default" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.0.1">
<title data-rh="true">macOS ARM builds on conda-forge | conda-forge | community-driven packaging for conda</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://conda-forge.org/blog/2020/10/29/macos-arm64/"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docusaurus_tag" content="default"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docsearch:docusaurus_tag" content="default"><meta data-rh="true" property="og:title" content="macOS ARM builds on conda-forge | conda-forge | community-driven packaging for conda"><meta data-rh="true" name="description" content="A new platform osx-arm64 has been added to the build matrix of"><meta data-rh="true" property="og:description" content="A new platform osx-arm64 has been added to the build matrix of"><meta data-rh="true" property="og:type" content="article"><meta data-rh="true" property="article:published_time" content="2020-10-29T00:00:00.000Z"><meta data-rh="true" property="article:author" content="https://github.com/isuruf"><meta data-rh="true" property="article:tag" content="conda-forge"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://conda-forge.org/blog/2020/10/29/macos-arm64/"><link data-rh="true" rel="alternate" href="https://conda-forge.org/blog/2020/10/29/macos-arm64/" hreflang="en"><link data-rh="true" rel="alternate" href="https://conda-forge.org/blog/2020/10/29/macos-arm64/" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="conda-forge | community-driven packaging for conda RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="conda-forge | community-driven packaging for conda Atom Feed">



<link rel="alternate" type="application/rss+xml" href="/news/rss.xml" title="conda-forge | community-driven packaging for conda RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/news/atom.xml" title="conda-forge | community-driven packaging for conda Atom Feed">


<link rel="stylesheet" href="/fonts/font-awesome/fontawesome.css">
<link rel="stylesheet" href="/fonts/font-awesome/solid.css">
<link rel="stylesheet" href="/fonts/font-awesome/regular.css">
<link rel="stylesheet" href="/fonts/font-awesome/brands.css"><link rel="stylesheet" href="/assets/css/styles.4574bade.css">
<script src="/assets/js/runtime~main.436a4cea.js" defer="defer"></script>
<script src="/assets/js/main.5b018aab.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.png" alt="conda-forge anvil logo without text" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/img/logo.png" alt="conda-forge anvil logo without text" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div></a><a href="/docs/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Docs</a><a class="navbar__item navbar__link" href="/news/">News</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/blog/">Blog</a><a href="https://conda-forge.org/status" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Status<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><a class="navbar__item navbar__link" href="/packages/">Packages</a></div><div class="navbar__items navbar__items--right"><a href="https://opencollective.com/conda-forge" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Donate<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><a href="https://github.com/conda-forge" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link fab fa-lg fa-github" title="GitHub"></a><a href="https://twitter.com/condaforge" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link fab fa-lg fa-twitter" title="Twitter"></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="container margin-vert--lg"><div class="row"><aside class="col col--3"><nav class="sidebar_re4s thin-scrollbar" aria-label="Blog recent posts navigation"><div class="sidebarItemTitle_pO2u margin-bottom--md">Recent posts</div><ul class="sidebarItemList_Yudw clean-list"><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2023/07/13/installer-security-fixes/">Security updates to our installers</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2023/03/12/circle-ci-security-breach/">CircleCI Security Incident</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2022/08/26/outreachy-wrap-up-blog-2022/">Outreachy 2022 Wrap-up Blog</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2021/11/03/tensorflow-gpu/">GPU enabled TensorFlow builds on conda-forge</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2021/09/24/travis-security/">Travis CI Security Incident</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2021/06/16/graykull-step-by-step/">Contributing Packages To conda-forge Using Grayskull</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2021/02/02/outreachy/">Conda-forge Outreachy</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2020/12/26/year-in-review/">2020 in Review</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2020/11/20/anaconda-tos/">Package Distribution and the anaconda.com Terms of Service</a></li><li class="sidebarItem__DBe"><a aria-current="page" class="sidebarItemLink_mo7H sidebarItemLinkActive_I1ZP" href="/blog/2020/10/29/macos-arm64/">macOS ARM builds on conda-forge</a></li></ul></nav></aside><main class="col col--7" itemscope="" itemtype="https://schema.org/Blog"><article itemprop="blogPost" itemscope="" itemtype="https://schema.org/BlogPosting"><meta itemprop="description" content="A new platform osx-arm64 has been added to the build matrix of"><header><h1 class="title_f1Hy" itemprop="headline">macOS ARM builds on conda-forge</h1><div class="container_mt6G margin-vert--md"><time datetime="2020-10-29T00:00:00.000Z" itemprop="datePublished">October 29, 2020</time> · <!-- -->8 min read</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--6 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a href="https://github.com/isuruf" target="_blank" rel="noopener noreferrer" class="avatar__photo-link"><img class="avatar__photo" src="https://github.com/isuruf.png" alt="Isuru Fernando" itemprop="image"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://github.com/isuruf" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">Isuru Fernando</span></a></div><small class="avatar__subtitle" itemprop="description">Member of conda-forge/core</small></div></div></div></div></header><div id="__blog-post-container" class="markdown" itemprop="articleBody"><p>A new platform <code>osx-arm64</code> has been added to the build matrix of
conda-forge. <code>osx-arm64</code> packages are built to run on upcoming macOS
arm64 processors marketed as <code>Apple Silicon</code>. An installer for this
platform can be found
<a href="https://github.com/conda-forge/miniforge/releases/latest/download/Miniforge3-MacOSX-arm64.sh" target="_blank" rel="noopener noreferrer">here</a>.</p>
<p>This will install a conda environment with python and conda in it.
Installed conda will be able to install packages like <code>numpy, scipy</code>.
Currently there are about 100 packages out of 10000 packages pre-built
for this platform.</p>
<p>All these packages are built on conda-forge&#x27;s current macOS <code>x86_64</code>
infrastructure. In order to do so, we have made lots of changes to the
infrastructure including,
<code>conda, conda-build, conda-smithy, constructor, conda-forge-ci-setup</code> to
facilitate cross-compiling which is the process of compiling a package
that will run on a <code>host</code> platform (<code>osx-arm64</code> in our case), with the
compilation done on a <code>build</code> platform (<code>osx-64</code> or <code>linux-64</code> in our
case).</p>
<p><code>osx-arm64</code> is the first conda platform that is completely bootstrapped
using conda-build&#x27;s cross-compiling facility. Previously, when adding a
new platform, conda-build was built with an existing python and pip
environment on the new platform. With cross-compiling, when the
compilers and a sysroot is set up on a different platform, an existing
conda-build installation (on <code>osx-64</code> and <code>linux-64</code> in this case) will
be able to start building packages right away.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="cross-compiling-builds-for-osx-arm64">Cross-compiling builds for <code>osx-arm64</code><a href="#cross-compiling-builds-for-osx-arm64" class="hash-link" aria-label="Direct link to cross-compiling-builds-for-osx-arm64" title="Direct link to cross-compiling-builds-for-osx-arm64">​</a></h2>
<p>In order to cross compile packages for <code>osx-arm64</code> we need compilers.
So, we first built <code>clang=11.0.0.rc1</code> which has support for targetting
<code>osx-arm64</code>. We also built <code>compiler-rt=11.0.0.rc1</code> as a universal build
support both <code>osx-64</code> and <code>osx-arm64</code>.</p>
<p>Linker, archiver, <code>otool</code>, <code>install_name_tool</code> was built using the
<a href="https://github.com/tpoechtrager/cctools-port" target="_blank" rel="noopener noreferrer">cctools-port project</a> by
Thomas Pöchtrager.</p>
<p>One issue we ran into was that the macOS 11.0 Big Sur Beta 7 required
that all executables and shared libraries be ad-hoc signed which is
signing without a verified signature. On suggestion of <code>cctools-port</code>
developer we added support to <code>cctools-port</code> to sign these executables
using <code>ldid</code> which can be used on Linux as well as macOS to sign.</p>
<p>Using these, the first cross compiled package we built was <code>libcxx</code> to
facilitate C++ builds. For the <code>osx-arm64</code> sysroot we used the
<code>MacOSX11.0.sdk</code> already installed on Azure pipelines and Travis-CI. Due
to licensing issues, we cannot distribute this, but it can be downloaded
from the Apple developer website even on Linux.</p>
<p>With clang we have a C/C++ compiler, but lack a Fortran compiler. We
used the <a href="https://github.com/iains/gcc-darwin-arm64" target="_blank" rel="noopener noreferrer">GCC fork for
darwin-arm64</a>. First, a cross
compiler (<code>build == host != target</code>) was built. Using that compiler, we
built a <code>cross-native</code> compiler (<code>build != host == target</code>) which gave
use the shared libraries like <code>libgfortran.dylib</code>.</p>
<p>We also added support for cross compiling rust programs to the rust
packages in conda and installing <code>rust_osx-64</code> on Linux will give you a
compiler that will build packages for <code>osx-64</code>.</p>
<p>As we haven&#x27;t done cross-compilation before, many packages needed to be
updated. Most were trivial changes that we automated later on. These
included getting a newer <code>config.sub</code> to identify the new autotools
platform <code>arm64-apple-darwin20.0.0</code>, adding options to CMake with the
environment variable <code>CMAKE_ARGS</code> to correctly set up the toolchain and
recipes were update to use <code>cmake ${CMAKE_ARGS} ..</code>. Running tests when
building were also disabled by guarding commands like <code>make check</code>,
<code>make test</code>, <code>ctest</code> with the env variable
<code>CONDA_BUILD_CROSS_COMPILATION</code>.</p>
<p>Cross-compiling python extensions is quite tricky as <code>distutils</code> is not
really setup to do this. Thanks to the project
<a href="https://github.com/benfogle/crossenv" target="_blank" rel="noopener noreferrer">crossenv</a> this is unofficially
supported with a few quirks. With <code>crossenv</code>, we can run a python on the
build machine (<code>osx-64</code> or <code>linux-64</code> in this case) that acts like it is
on <code>osx-arm64</code>. <code>crossenv</code> monkey-patches a few functions like
<code>os.uname</code> and sets up values like <code>_PYTHON_SYSCONFIG_DATA</code> to make
python running on <code>osx-64</code> or <code>linux-64</code> behave like <code>osx-arm64</code>. One
issue is that, monkey-patching <code>sys.platform</code> doesn&#x27;t work and
therefore if a python package in it&#x27;s <code>setup.py</code> uses <code>sys.platform</code> to
differentiate OSes this will lead to unintended consequences if you are
cross-compiling from <code>linux-64</code>. Therefore, we have to use <code>osx-64</code> as
our <code>build</code> system when cross-compiling for <code>osx-arm64</code>. Note that
packages using <code>sysconfig.get_platform()</code> will get the correct platform.</p>
<p>For creating an installer for conda, we needed a standalone conda
executable to bootstrap the conda environment. For other platforms we
relied on <code>conda-standalone</code> which is a standalone conda executable
created using <code>pyinstaller</code>. Since <code>pyinstaller</code> does not support
cross-compile, we decided to use <code>micromamba</code> as the bootstrapper and
added features to <code>micromamba</code> so that it can function as the
bootstrapper.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="how-to-add-a-osx-arm64-build-to-a-feedstock">How to add a <code>osx-arm64</code> build to a feedstock<a href="#how-to-add-a-osx-arm64-build-to-a-feedstock" class="hash-link" aria-label="Direct link to how-to-add-a-osx-arm64-build-to-a-feedstock" title="Direct link to how-to-add-a-osx-arm64-build-to-a-feedstock">​</a></h2>
<p>All the below changes will be done by a bot and the packages the bot
will send PRs to is determined by the list of packages at
<a href="https://github.com/conda-forge/conda-forge-pinning-feedstock/blob/master/recipe/migrations/osx_arm64.txt" target="_blank" rel="noopener noreferrer">conda-forge-pinning</a>
and their dependences. If you would like to add support, please send a
PR adding the feedstock name to the above list. After that PR is merged,
you can monitor the status at <a href="https://conda-forge.org/status/#armosxaddition" target="_blank" rel="noopener noreferrer">conda-forge
status-page</a> and if a
particular PR is stalled you can send a PR to the feedstock to fix it.</p>
<p>Following instructions are for when you want to add support manually.</p>
<p>Add the following to <code>conda-forge.yml</code> (on Linux or OSX),</p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">build_platform</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">osx_arm64</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> osx_64</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">test</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> native_and_emulated</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>You can rerender using,</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">conda smithy rerender</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>For python packages, add one or more of the following to
<code>recipe/meta.yaml</code> as needed, noting that you <em>must</em> only add
<code>numpy</code>, <code>cython</code>, and/or <code>pybind11</code>
if they are used in <code>host:</code> as well,</p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">requirements</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">build</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> python                                 </span><span class="token comment" style="color:#999988;font-style:italic"># [build_platform != target_platform]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> cross</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">python_</span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> target_platform </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain">     </span><span class="token comment" style="color:#999988;font-style:italic"># [build_platform != target_platform]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> cython                                 </span><span class="token comment" style="color:#999988;font-style:italic"># [build_platform != target_platform]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> numpy                                  </span><span class="token comment" style="color:#999988;font-style:italic"># [build_platform != target_platform]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> pybind11                               </span><span class="token comment" style="color:#999988;font-style:italic"># [build_platform != target_platform]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>For autotools package, add the following to <code>recipe/meta.yaml</code>,</p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">requirements</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">build</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> gnuconfig   </span><span class="token comment" style="color:#999988;font-style:italic"># [unix]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>and to <code>recipe/build.sh</code>,</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># Get an updated config.sub and config.guess</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">cp $BUILD_PREFIX/share/gnuconfig/config.* .</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>For cmake packages, add the following to <code>recipe/build.sh</code>,</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">cmake ${CMAKE_ARGS} ..</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>For <code>meson</code> packages, add the following to <code>recipe/build.sh</code>,</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">meson ${MESON_ARGS} builddir/</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<div class="theme-admonition theme-admonition-note admonition_xJq3 alert alert--secondary"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_BuS1"><p>Conda automatically creates a <a href="https://mesonbuild.com/Cross-compilation.html" target="_blank" rel="noopener noreferrer">cross build definition
file</a> when
cross-compiling, and adds the necessary argument to <code>${MESON_ARGS}</code> to
point <code>meson</code> to that file. <code>${MESON_ARGS}</code> is only defined when
cross-compiling, not for normal builds.</p></div></div>
<p>For rust packages, add the following to <code>recipe/meta.yaml</code>,</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">requirements:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  build:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    - {{ compiler(&#x27;rust&#x27;) }}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>If there&#x27;s a line like <code>make check</code> in <code>recipe/build.sh</code> that cannot be
run when cross-compiling, do the following,</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">if [[ &quot;$CONDA_BUILD_CROSS_COMPILATION&quot; != &quot;1&quot; ]]; then</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  make check</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">fi</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>After these changes, another rerendering might be required.</p>
<p>Some useful jinja variables,</p>
<ol>
<li><code>build_platform</code> - conda subdir for <code>BUILD_PREFIX</code>. eg:
<code>linux-64</code></li>
<li><code>target_platform</code> - conda subdir for <code>PREFIX</code>. eg: <code>osx-arm64</code></li>
</ol>
<p>Some useful environment variables,</p>
<ol>
<li><code>build_platform</code></li>
<li><code>target_platform</code></li>
<li><code>CONDA_BUILD_CROSS_COMPILATION</code> - 1 if cross compiling</li>
<li><code>CMAKE_ARGS</code> - arguments to pass to cmake</li>
<li><code>CC_FOR_BUILD</code> - C compiler for build platform</li>
<li><code>CXX_FOR_BUILD</code> - C++ compiler for build platform</li>
<li><code>HOST</code> - a triplet for host passed to autoconf. eg:
<code>arm64-apple-darwin20.0.0</code></li>
<li><code>BUILD</code> - a triplet for build passed to autoconf. eg:
<code>x86_64-conda-linux-gnu</code></li>
</ol>
<p>Some useful configure options in <code>conda-forge.yml</code></p>
<ol>
<li>
<p><code>build_platform</code> - a dictionary mapping <code>build</code> subdir to <code>host</code> subdir. eg:</p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">build_platform</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">osx_arm64</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> osx_64</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">linux_ppc64le</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> linux_64</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">linux_aarch64</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> linux_64</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p><code>test_on_native_only</code> - a boolean to turn off testing on cross
compiling. If the tests don&#x27;t require emulation (for eg: check
that a file exists), then <code>test_on_native_only: false</code> will run
the tests even when cross compiling.</p>
</li>
</ol>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="building-locally">Building locally<a href="#building-locally" class="hash-link" aria-label="Direct link to Building locally" title="Direct link to Building locally">​</a></h2>
<p>For building locally add the following in
<code>$HOME/conda_build_config.yaml</code>.</p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">SDKROOT</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> /path/to/MacOSX11.0.sdk</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>After that, look for the config you want to run in <code>.ci_support</code> folder
in the root of the feedstock For eg: <code>.ci_support/osx_arm64_.yaml</code>. Then
run,</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">conda build recipe -m .ci_support/osx_arm64_.yaml -c conda-forge -c conda-forge/label/rust_dev</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>This should start a new build for <code>osx-arm64</code>.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="testing-packages">Testing packages<a href="#testing-packages" class="hash-link" aria-label="Direct link to Testing packages" title="Direct link to Testing packages">​</a></h2>
<p>In order to test packages intended to run on future Apple Silicon
hardware, Apple provides a machine called Developer Transition Kit
(DTK). Jonathan Helmus and Eli Rykoff has helped with testing these
packages on DTKs. Thanks to Eli Rykoff, we are now running tests for
these packages as a daily cron job which has led to finding several bugs
in our cross compiling infrastructure and also bugs in our recipes.</p>
<p>To test cross compiled recipes, transfer the built conda package to the
<code>host</code> and run,</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">conda build --test /path/to/package -c conda-forge</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>This work would not have been possible without the help of many people
including the upstream maintainers of compiler infrastructure (which
includes conda, conda-build, cctools, tapi, cctools-port, ldid, llvm,
clang, compiler-rt, openmp, libcxx, crossenv, rust, gcc-darwin-arm64),
<code>conda-forge/help-osx-arm64</code> team including Matt Becker, Eli Rykoff and
Uwe Korn who sent PRs to fix recipes, <code>conda-forge/bot</code> team and also
all the conda-forge maintainers of the 100 feedstocks who reviewed and
fixed PRs.</p>
<p>Isuru Fernando</p></div><footer class="row docusaurus-mt-lg blogPostFooterDetailsFull_mRVl"><div class="col"><b>Tags:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/blog/tags/conda-forge/">conda-forge</a></li></ul></div><div class="col margin-top--sm"><a href="https://github.com/conda-forge/conda-forge.github.io/tree/main/blog/2020-10-29-macos-arm64.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Blog post page navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/blog/2020/11/20/anaconda-tos/"><div class="pagination-nav__sublabel">Newer Post</div><div class="pagination-nav__label">Package Distribution and the anaconda.com Terms of Service</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/blog/2020/10/02/versions/"><div class="pagination-nav__sublabel">Older Post</div><div class="pagination-nav__label">The API Territory and Version Number Map</div></a></nav></main><div class="col col--2"><div class="tableOfContents_bqdL thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#cross-compiling-builds-for-osx-arm64" class="table-of-contents__link toc-highlight">Cross-compiling builds for <code>osx-arm64</code></a></li><li><a href="#how-to-add-a-osx-arm64-build-to-a-feedstock" class="table-of-contents__link toc-highlight">How to add a <code>osx-arm64</code> build to a feedstock</a></li><li><a href="#building-locally" class="table-of-contents__link toc-highlight">Building locally</a></li><li><a href="#testing-packages" class="table-of-contents__link toc-highlight">Testing packages</a></li></ul></div></div></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a href="/docs/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Getting started</a></li><li class="footer__item"><a href="/docs/user/00_intro.html" target="_blank" rel="noopener noreferrer" class="footer__link-item">User docs</a></li><li class="footer__item"><a href="/docs/maintainer/00_intro.html" target="_blank" rel="noopener noreferrer" class="footer__link-item">Maintainer docs</a></li><li class="footer__item"><a href="/docs/orga/00_intro.html" target="_blank" rel="noopener noreferrer" class="footer__link-item">Organisation docs</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="/docs" target="_blank" rel="noopener noreferrer" class="footer__link-item">About conda-forge</a></li><li class="footer__item"><a href="/docs/orga/governance.html" target="_blank" rel="noopener noreferrer" class="footer__link-item">Governance</a></li><li class="footer__item"><a href="/docs/orga/minutes/00_intro.html" target="_blank" rel="noopener noreferrer" class="footer__link-item">Meeting minutes</a></li><li class="footer__item"><a href="/docs/orga/getting-in-touch.html" target="_blank" rel="noopener noreferrer" class="footer__link-item">Get in touch</a></li></ul></div><div class="col footer__col"><div class="footer__title">Stay up-to-date</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/news/archive/">News</a></li><li class="footer__item"><a class="footer__link-item" href="/blog/archive/">Blog</a></li><li class="footer__item"><a href="https://conda-forge.org/status" target="_blank" rel="noopener noreferrer" class="footer__link-item">Status<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://twitter.com/condaforge" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">Resources</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/dashboard/">Dashboard</a></li><li class="footer__item"><a class="footer__link-item" href="/style-guide/">Style guide</a></li><li class="footer__item"><a href="https://github.com/conda-forge" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://app.element.io/#/room/#conda-forge:matrix.org" target="_blank" rel="noopener noreferrer" class="footer__link-item">Element<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://conda.discourse.group/c/pkg-building/conda-forge/25" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discourse<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://stackoverflow.com/questions/tagged/conda-forge" target="_blank" rel="noopener noreferrer" class="footer__link-item">Stack Overflow<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2024 conda-forge · Built with Docusaurus</div></div></div></footer></div>
</body>
</html>