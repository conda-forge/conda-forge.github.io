"use strict";(self.webpackChunkcf_infra_docs=self.webpackChunkcf_infra_docs||[]).push([[86828],{48926:(t,e,i)=>{i.d(e,{D:()=>r,e:()=>a});const a={usage:{options:{responsive:!0,plugins:{legend:{display:!1}},scales:{x:{type:"time",time:{minUnit:"hour"}},y:{beginAtZero:!0,precision:0}}}}},r={cloud:{anaconda:{api:"https://sqvvxmkr4r26.statuspage.io/api/v2/status.json",link:"https://anaconda.statuspage.io/",title:"Anaconda"},appveyor:{api:"https://status.appveyor.com/api/v2/status.json",link:"https://status.appveyor.com/",title:"AppVeyor"},azure:{api:"https://conda-forge.herokuapp.com/status-monitor/azure",link:"https://status.dev.azure.com/",title:"Azure DevOps"},circle:{api:"https://status.circleci.com/api/v2/status.json",link:"https://status.circleci.com",title:"Circle CI"},docker:{api:"https://conda-forge.herokuapp.com/status-monitor/docker",link:"https://dockerstatus.com",title:"Docker"},github:{api:"https://www.githubstatus.com/api/v2/status.json",link:"https://www.githubstatus.com/",title:"GitHub"},open_gpu_server:{api:"https://conda-forge.herokuapp.com/status-monitor/open-gpu-server",link:"https://ci-status.quansight.dev/",title:"Open GPU Server"},quay:{api:"https://status.redhat.com/api/v2/status.json",link:"https://status.redhat.com/",title:"Quay.io"},travis:{api:"https://www.traviscistatus.com/api/v2/status.json",link:"https://www.traviscistatus.com/",title:"Travis CI"}},azure:{pipelines:"https://conda-forge.herokuapp.com/status-monitor/report/azure-pipelines",status:"https://conda-forge.herokuapp.com/status-monitor/azure"},github:{actions:"https://conda-forge.herokuapp.com/status-monitor/report/github-actions"},stats:"https://raw.githubusercontent.com/conda-forge/by-the-numbers/main/data/live_counts.json",migrations:{details:"https://raw.githubusercontent.com/regro/cf-graph-countyfair/master/status/migration_json/<NAME>.json",graph:"https://raw.githubusercontent.com/regro/cf-graph-countyfair/master/status/migration_svg/<NAME>.svg?sanitize=true",status:{closed:"https://raw.githubusercontent.com/regro/cf-graph-countyfair/master/status/closed_status.json",longterm:"https://raw.githubusercontent.com/regro/cf-graph-countyfair/master/status/longterm_status.json",paused:"https://raw.githubusercontent.com/regro/cf-graph-countyfair/master/status/paused_status.json",regular:"https://raw.githubusercontent.com/regro/cf-graph-countyfair/master/status/regular_status.json"}},repos:{badges:[{name:"conda-forge documentation",link:"https://github.com/conda-forge/conda-forge.github.io",badge:"https://github.com/conda-forge/conda-forge.github.io/workflows/deploy/badge.svg",badgeLink:"https://github.com/conda-forge/conda-forge.github.io/actions?query=workflow%3Adeploy"},{name:"autotick bot",link:"https://github.com/regro/cf-scripts",badge:"https://github.com/regro/cf-scripts/actions/workflows/bot-bot.yml/badge.svg",badgeLink:"https://github.com/regro/cf-scripts/actions"},{name:"feedstock creation",link:"https://github.com/conda-forge/staged-recipes",badge:"https://github.com/conda-forge/admin-requests/actions/workflows/create_feedstocks.yml/badge.svg",badgeLink:"https://github.com/conda-forge/admin-requests/actions/workflows/create_feedstocks.yml"},{name:"admin migrations",link:"https://github.com/conda-forge/admin-migrations",badge:"https://github.com/conda-forge/admin-migrations/actions/workflows/migrate.yml/badge.svg",badgeLink:"https://github.com/conda-forge/admin-migrations/actions/workflows/migrate.yml"}],cdn:{api:"https://conda.anaconda.org/conda-forge/last-updated.json",link:"https://conda.anaconda.org/conda-forge/rss.xml"},services:{api:"https://conda-forge.herokuapp.com/alive",link:"https://github.com/conda-forge/conda-forge-webservices"}},travis:{usage:"https://conda-forge.herokuapp.com/status-monitor/report/travis-ci"},versions:{api:"https://raw.githubusercontent.com/regro/cf-graph-countyfair/master/status/version_status.v2.json",pr:"https://github.com/conda-forge/<NAME>-feedstock/tree/main/recipe"},schemas:{"conda-forge.yml":"https://raw.githubusercontent.com/conda-forge/conda-smithy/main/conda_smithy/data/conda-forge.json"}}},19821:(t,e,i)=>{i.r(e),i.d(e,{default:()=>f,measureProgress:()=>p});var a=i(56347),r=i(44586),s=i(48926),n=i(27293),o=i(12921),l=i(96540),c=i(35632);const d={migration_details:"migration_details_INtU",migration_details_bar:"migration_details_bar_HfK3",migration_details_toggle:"migration_details_toggle__YNI",migration_details_filter:"migration_details_filter_cpRW",migration_details_filter_button:"migration_details_filter_button_DcbR",migration_details_filter_done:"migration_details_filter_done_HPjH",migration_details_filter_done_hidden:"migration_details_filter_done_hidden_MAZZ",migration_details_filter_in_pr:"migration_details_filter_in_pr_lv2H",migration_details_filter_in_pr_hidden:"migration_details_filter_in_pr_hidden_eRVs",migration_details_filter_awaiting_pr:"migration_details_filter_awaiting_pr_cLot",migration_details_filter_awaiting_pr_hidden:"migration_details_filter_awaiting_pr_hidden__f2a",migration_details_filter_awaiting_parents:"migration_details_filter_awaiting_parents_qibn",migration_details_filter_awaiting_parents_hidden:"migration_details_filter_awaiting_parents_hidden_vgz0",migration_details_filter_not_solvable:"migration_details_filter_not_solvable_sbZh",migration_details_filter_not_solvable_hidden:"migration_details_filter_not_solvable_hidden_csRp",migration_details_filter_bot_error:"migration_details_filter_bot_error_kVbU",migration_details_filter_bot_error_hidden:"migration_details_filter_bot_error_hidden_f8nM",migration_details_filter_icon:"migration_details_filter_icon_U6Yo",collapsed:"collapsed_Rsep",expanded:"expanded_bFKe",migration_details_bar_tooltip:"migration_details_bar_tooltip_GmsJ",migration_details_filter_dot:"migration_details_filter_dot_f6OS",migration_details_filter_in_pr_dot:"migration_details_filter_in_pr_dot_MrJT",migration_details_filter_title_container:"migration_details_filter_title_container_bqwK"};var _=i(42503),g=(i(11470),i(19365),i(74848));const m=[["done","Done",!0],["in-pr","In PR",!1],["awaiting-pr","Awaiting PR",!1],["awaiting-parents","Awaiting parents",!1],["not-solvable","Not solvable",!1],["bot-error","Bot error",!1]],h=m.reduce(((t,e)=>{let[i,a]=e;return{...t,[i]:a}}),{}),u="migration-toggle";function p(t){const e=t.done.length+t["in-pr"].length,i=e+t["awaiting-parents"].length+t["awaiting-pr"].length+t["bot-error"].length+t["not-solvable"].length;return{done:e,percentage:e/(i||1)*100,total:i}}function f(){const t=(0,a.zy)(),{siteConfig:e}=(0,r.A)(),[i,c]=(0,l.useState)({name:new URLSearchParams(t.search).get("name"),details:null,redirect:!1,view:"table"}),_=t=>{if(window&&window.localStorage)try{window.localStorage.setItem(u,t)}catch(e){console.warn("error writing to local storage",e)}c((e=>({...e,view:t})))};if((0,l.useEffect)((()=>{if(!i.name)return c((t=>({...t,redirect:!0})));let t="";if(window&&window.localStorage)try{t=window.localStorage.getItem(u)}catch(e){console.warn("error reading from local storage",e)}(async()=>{try{const a=s.D.migrations.details.replace("<NAME>",i.name),r=await(await fetch(a)).json();r.progress=p(r),r.paused_or_closed=await async function(t){for(const i of["paused","closed"])try{const e=await fetch(s.D.migrations.status[i]);if(t in await e.json())return i}catch(e){console.warn(`error checking status for ${t}:`,e)}}(h),c((e=>({...e,details:r,view:t||e.view})))}catch(e){console.warn(`error loading migration: ${i.name}`,e),c((t=>({...t,redirect:!0})))}})()}),[]),i.redirect)return(0,g.jsx)(a.rd,{to:"/status",replace:!0});const{details:m,name:h,view:f}=i;return(0,g.jsx)(o.A,{title:e.title,description:"Status dashboard for conda-forge",children:(0,g.jsx)("main",{className:`container ${d.migration_details}`,children:(0,g.jsxs)("div",{className:"card margin-top--xs",children:[(0,g.jsxs)("div",{className:"card__header",children:[(0,g.jsx)("div",{className:d.migration_details_toggle,children:(0,g.jsx)("div",{class:"tabs-container",children:(0,g.jsxs)("ul",{role:"tablist","aria-orientation":"horizontal",class:"tabs",children:[(0,g.jsx)("li",{role:"tab",class:["tabs__item","table"==f?"tabs__item--active":null].join(" "),onClick:()=>_("table"),children:"Table"},"table"),(0,g.jsx)("li",{role:"tab",class:["tabs__item","graph"==f?"tabs__item--active":null].join(" "),onClick:()=>_("graph"),children:"Graph"},"graph"),h&&(0,g.jsx)("a",{href:s.D.migrations.details.replace("<NAME>",h),target:"_blank",children:(0,g.jsx)("li",{role:"tab",class:"tabs__item",children:(0,g.jsxs)("span",{children:["Raw ",(0,g.jsx)("i",{className:"fa fa-fw fa-arrow-up-right-from-square"})]})},"raw")})]})})}),(0,g.jsx)(j,{children:h}),(0,g.jsx)("div",{style:{clear:"both"}})]}),(0,g.jsxs)("div",{className:"card__body",style:{overflow:"auto"},children:[m&&"paused"===m.paused_or_closed?(0,g.jsx)(n.A,{type:"note",children:"This migration is currently paused."}):null,m&&"closed"===m.paused_or_closed?(0,g.jsx)(n.A,{type:"note",children:"This migration has been closed recently."}):null,m&&(0,g.jsx)(b,{details:m})||null,"graph"===f?(0,g.jsx)(w,{children:h}):m&&(0,g.jsx)(v,{details:m})]})]})})})}function b(t){let{details:e}=t;return(0,g.jsxs)(g.Fragment,{children:[(0,g.jsxs)("h4",{children:["PRs made ",e.progress.percentage.toFixed(0),"%"]}),(0,g.jsx)("div",{className:d.migration_details_bar,children:m.filter((t=>{let[i]=t;return e[i]?.length})).map(((t,i)=>{let[a]=t;return(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)("a",{id:`migration-bar-element-${a}`,className:d[`migration_details_filter_${a.replace("-","_")}`],style:{flex:e[a].length},alt:h[a]+" "+parseFloat(100*e[a].length/p(e).total).toFixed(1)+"% ("+e[a].length+" PRs over "+p(e).total+")"},`migration-bar-element-href-${a}`),(0,g.jsx)(_.m_,{anchorSelect:`#migration-bar-element-${a}`,place:"top",className:d.migration_details_bar_tooltip,children:(0,g.jsx)("div",{children:h[a]})},`migration-bar-element-tooltip-${a}`)]})}))})]})}function j(t){let{children:e}=t;return(0,g.jsx)("nav",{"aria-label":"breadcrumbs",children:(0,g.jsxs)("ul",{className:"breadcrumbs",children:[(0,g.jsx)("li",{className:"breadcrumbs__item",children:(0,g.jsx)("a",{className:"breadcrumbs__link",href:"/",children:"conda-forge"})}),(0,g.jsx)("li",{className:"breadcrumbs__item",children:(0,g.jsx)("a",{className:"breadcrumbs__link",href:"/status",children:"Status"})}),(0,g.jsx)("li",{className:"breadcrumbs__item",children:(0,g.jsx)("a",{className:"breadcrumbs__link",href:"/status#migrations",children:"Migrations"})}),(0,g.jsx)("li",{className:"breadcrumbs__item breadcrumbs__item--active",children:(0,g.jsx)("a",{className:"breadcrumbs__link",href:"",children:e})})]})})}function x(t){let{counts:e,filters:i,onFilter:a}=t;return(0,g.jsx)("div",{className:d.migration_details_filter,children:m.map(((t,r)=>{let[s,n]=t;const o=`migration_details_filter_${s.replace("-","_")}`;return(0,g.jsxs)("div",{className:["button",d.migration_details_filter_button,i[s]?"button--secondary":"button--primary"].join(" "),onClick:()=>a(s),children:[i[s]?(0,g.jsx)("span",{className:[d[`${o}_hidden`],d.migration_details_filter_dot,d[`${o}_dot`]].join(" ")}):(0,g.jsx)("span",{className:[d[o],d.migration_details_filter_dot,d[`${o}_dot`]].join(" ")}),(0,g.jsxs)("div",{className:d.migration_details_filter_title_container,children:[n," (",e[s],")"]})]},r)}))})}function w(t){const[e,i]=(0,l.useState)(""),a=s.D.migrations.graph.replace("<NAME>",t.children);return(0,g.jsxs)("div",{children:[(0,g.jsx)("p",{style:{textAlign:"center"},children:(0,g.jsx)("a",{href:a,target:"blank",rel:"noopener noreferrer",children:(0,g.jsxs)("code",{children:[t.children,".svg"]})})}),e?(0,g.jsx)("p",{style:{textAlign:"center"},children:"Graph is unavailable."}):(0,g.jsx)("div",{style:{overflowX:"auto"},children:(0,g.jsx)(c.A,{onError:t=>i(t),src:a,title:t.children,description:`Migration graph for ${t.children}`})})]})}function v(t){let{details:e}=t;const i=m.reduce(((t,e)=>{let[i,a,r]=e;return{...t,[i]:r}}),{}),[a,r]=(0,l.useState)(i),s=e._feedstock_status,n=m.reduce(((t,i)=>{let[r]=i;return a[r]?t:t.concat(e[r].map((t=>[t,r])))}),[]).sort(((t,e)=>s[e[0]].num_descendants-s[t[0]].num_descendants||m.findIndex((e=>e[0]==t[1]))-m.findIndex((t=>t[0]==e[1]))||t[0].localeCompare(e[0])));return(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(x,{counts:m.reduce(((t,i)=>{let[a]=i;return{...t,[a]:e[a]?.length}}),{}),filters:{...a},onFilter:t=>r((e=>({...e,[t]:!e[t]})))}),n.length>0&&(0,g.jsxs)("table",{children:[(0,g.jsx)("thead",{children:(0,g.jsxs)("tr",{children:[(0,g.jsx)("th",{style:{width:200},children:"Name"}),(0,g.jsx)("th",{style:{width:115},children:"Status"}),(0,g.jsx)("th",{style:{width:115},children:"Total number of children"}),(0,g.jsx)("th",{style:{flex:1},children:"Immediate children"})]})}),(0,g.jsx)("tbody",{children:n.map(((t,e)=>{let[i,a]=t;return(0,g.jsx)(k,{children:{feedstock:s[i],name:i,status:a}},e)}))})]})]})}function k(t){let{children:e}=t;const[i,a]=(0,l.useState)(!0),{feedstock:r,name:s,status:n}=e,o=r.immediate_children||[],c=r.num_descendants,_=r.pr_url,m=r.pre_pr_migrator_status;return(0,g.jsxs)(g.Fragment,{children:[(0,g.jsxs)("tr",{children:[(0,g.jsx)("td",{children:_?(0,g.jsx)("a",{href:_,children:s}):m?(0,g.jsx)("span",{className:`${i?d.collapsed:d.expanded}`,onClick:()=>a(!i),children:s}):(0,g.jsx)("span",{children:s})}),(0,g.jsx)("td",{style:{textAlign:"center"},children:h[n]}),(0,g.jsx)("td",{style:{textAlign:"center"},children:c||null}),(0,g.jsx)("td",{children:o.map(((t,e)=>(0,g.jsxs)(l.Fragment,{children:[(0,g.jsx)("span",{style:{marginBottom:1},className:"badge badge--secondary",children:t}),o.length-1===e?"":" "]},e)))})]}),m&&!i&&(0,g.jsx)("tr",{children:(0,g.jsx)("td",{colSpan:4,children:(0,g.jsx)("pre",{dangerouslySetInnerHTML:{__html:m}})})})]})}}}]);