"use strict";(self.webpackChunkcf_infra_docs=self.webpackChunkcf_infra_docs||[]).push([[561],{50048:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>t,contentTitle:()=>l,default:()=>h,frontMatter:()=>r,metadata:()=>c,toc:()=>d});var i=s(85893),o=s(11151);const r={title:"2016-06-09"},l="2016-06-09: Compiler special meeting",c={id:"orga/minutes/2016-06-09",title:"2016-06-09",description:"Time00 UTC",source:"@site/docs/orga/minutes/2016-06-09.md",sourceDirName:"orga/minutes",slug:"/orga/minutes/2016-06-09",permalink:"/docs/orga/minutes/2016-06-09",draft:!1,unlisted:!1,tags:[],version:"current",frontMatter:{title:"2016-06-09"},sidebar:"defaultSidebar",previous:{title:"2016-06-24",permalink:"/docs/orga/minutes/2016-06-24"},next:{title:"2016-06-03",permalink:"/docs/orga/minutes/2016-06-03"}},t={},d=[];function a(e){const n={a:"a",code:"code",h1:"h1",li:"li",p:"p",pre:"pre",strong:"strong",u:"u",ul:"ul",...(0,o.a)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.h1,{id:"2016-06-09-compiler-special-meeting",children:"2016-06-09: Compiler special meeting"}),"\n",(0,i.jsx)(n.p,{children:"Time: 14:00 UTC"}),"\n",(0,i.jsxs)(n.p,{children:["Hangout link: ",(0,i.jsx)(n.a,{href:"https://hangouts.google.com/call/v5olhwzpfzgzpoq5i3wthjpqpie"}),(0,i.jsx)(n.a,{href:"https://hangouts.google.com/call/v5olhwzpfzgzpoq5i3wthjpqpie",children:"https://hangouts.google.com/call/v5olhwzpfzgzpoq5i3wthjpqpie"})]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Attendees"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Jonathan Helmus"}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"https://conda-forge.hackpad.com/ep/profile/wv6uvIZX6h0",children:"John Kirkham"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"https://conda-forge.hackpad.com/ep/profile/vuQo2WAv29A",children:"Johannes Koster"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"https://conda-forge.hackpad.com/ep/profile/DMmBLyb21HK",children:"Bjorn Gruning"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"https://conda-forge.hackpad.com/ep/profile/yHQTJXZ4gyS",children:"Michael Sarahan"})}),"\n",(0,i.jsx)(n.li,{children:"Ray"}),"\n",(0,i.jsx)(n.li,{children:"Phil Elson"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Agenda"})}),"\n",(0,i.jsx)(n.p,{children:"Compiler docker images:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Conda-forge"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"*   `docker pull condaforge/linux-anvil`\n"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Built on Quay ( ",(0,i.jsx)(n.a,{href:"https://quay.io/repository/condaforge/linux-anvil"}),(0,i.jsx)(n.a,{href:"https://quay.io/repository/condaforge/linux-anvil",children:"https://quay.io/repository/condaforge/linux-anvil"})," )"]}),"\n",(0,i.jsxs)(n.li,{children:["Mirrored ( ",(0,i.jsx)(n.a,{href:"https://hub.docker.com/r/condaforge/linux-anvil/"}),(0,i.jsx)(n.a,{href:"https://hub.docker.com/r/condaforge/linux-anvil/",children:"https://hub.docker.com/r/condaforge/linux-anvil/"})," )"]}),"\n",(0,i.jsx)(n.li,{children:"CentOS 6, GCC 4.4.7, Devtoolset2 (GCC 4.8)"}),"\n",(0,i.jsxs)(n.li,{children:["Source code ( ",(0,i.jsx)(n.a,{href:"https://github.com/conda-forge/docker-images/tree/fbde090bd608caa720d5caad861aa382a8bf3f5c/linux-anvil"}),(0,i.jsx)(n.a,{href:"https://github.com/conda-forge/docker-images/tree/fbde090bd608caa720d5caad861aa382a8bf3f5c/linux-anvil",children:"https://github.com/conda-forge/docker-images/tree/fbde090bd608caa720d5caad861aa382a8bf3f5c/linux-anvil"})," )"]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["Bioconda: ",(0,i.jsx)(n.a,{href:"https://hub.docker.com/r/bioconda/bioconda-builder/"}),(0,i.jsx)(n.a,{href:"https://hub.docker.com/r/bioconda/bioconda-builder/",children:"https://hub.docker.com/r/bioconda/bioconda-builder/"})]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"*   CentOS 5, GCC 4.4, Devtoolset2 (GCC 4.8)\n"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"GCC 4.8 on PATH by default"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"Centers of discussion:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Need of libstdc++ updates / shadowing"}),"\n",(0,i.jsx)(n.li,{children:"Language compatibility needs (C++11/14)"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"As time allows: MSYS2 on Windows"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Notes"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.u,{children:"Overview of the Docker images"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"conda-forge and bioconda seems to use same GCC version"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.u,{children:"Key points:"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Need to monitor if we need to ship libstdc++"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"*   Not needed if use Devtoolset \n"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"But users may still need to install if they are missing this library, like Arch linux, so we may want to ship this anyway"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Need to say what language standard we are going to support C++14?"}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Legacy ABI support for old libraries (dual API, issues with older/newer ABI)"}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.u,{children:"History on conda-forge"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Initial conda-forge used gcc package"}),"\n",(0,i.jsx)(n.li,{children:"sometimes this would cause issues if packages were not pinned"}),"\n",(0,i.jsx)(n.li,{children:"switched to devoolset2 which does the static linking trick,"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.u,{children:"Future"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Use devtoolset4? (GCC 5.3, available on CentOS6)"}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Build our own compiler toolchain"}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"GCC 6, could have some issues"}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Could have devtoolset2 and devtoolset4 installed in same Docker image"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"*   Need to have some mechanism to activate a particular toolset\n"})}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Using devtoolset does limit OS (CentOS5 only supports devtoolset2 not 4)"}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Could we build our own devtoolset?"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"*   Patches are available (srpm)\n"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Not small task, but do we want to take this on?"}),"\n",(0,i.jsxs)(n.li,{children:["Here is a link for some source ( ",(0,i.jsx)(n.a,{href:"https://git.centos.org/commit/rpms"}),(0,i.jsx)(n.a,{href:"https://git.centos.org/commit/rpms%21devtoolset-4-gcc/e14f97005a3d22e658d01d0fc8899f5bda1982ca",children:"https://git.centos.org/commit/rpms"}),(0,i.jsx)(n.a,{href:"https://git.centos.org/commit/rpms%21devtoolset-4-gcc/e14f97005a3d22e658d01d0fc8899f5bda1982ca",children:"!devtoolset-4-gcc/e14f97005a3d22e658d01d0fc8899f5bda1982ca"})," )"]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Using Docker image from Continuum"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"*   Would  need to ship libstdc++ and keep it up to date to avoid shadowing system  version (need to be newer than users with newest version)\n"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Not many package in defaults link against libstdc++"}),"\n",(0,i.jsx)(n.li,{children:"Have been shipping and has not seen issue yet..."}),"\n",(0,i.jsx)(n.li,{children:"Julia has been doing this"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"libgfortran  was broken because defaults was shipping old version which causes  issues if user has more recent version of library installed"}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Could  we have a version of libstdc++ conda package which nothing depends on  but users could install if they are missing a system libstdc++?"}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Current infrastructure may not be able to support building gcc, but we could user other systems for this."}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Continuum needs to support CentOS 5, conda-forge is happy with CentOS6 as minimum glibc version"}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"John will do this. (After some discussion it became unclear whether this was best approach; so, holding off for now.)"}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Should have common build environment"}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"How to support fortran on Mac"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"*   New to use gfortran and have packages depend on libgfortran? package\n"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"May be out of date, should we update?"}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Port this solution to Linux?"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"    *   Either use patches or ship libstdc++\n"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Have same package for Mac and Linux OR use devtoolset magic?"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"*   Want time to think and advantages and disadvantages for both\n\n        *   [Hackpad](https://conda-forge.hackpad.com/Devtools-vs-Ship-libstdc-Oz7Qqr4WrOr)\n\n*   Private vote by next Thursday, fill out [](http://goo.gl/forms/CexagdweBOKZZDjv1)[http://goo.gl/forms/CexagdweBOKZZDjv1](http://goo.gl/forms/CexagdweBOKZZDjv1)\n"})}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Come up with a list of gcc 6.x problems that are encountered."}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Why use clang vs gcc on Mac"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"*   gcc has been remove in recent version of OS X\n"})}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"MSYS2"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"*   Can be useful to get devtools \n"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:'What about "alternative" MSYS2 Python environment'}),"\n",(0,i.jsx)(n.li,{children:"Visual Studio and MSYS2 gcc are not compatible"}),"\n",(0,i.jsx)(n.li,{children:"gfortran is big target (at least for Jonathan)"}),"\n",(0,i.jsx)(n.li,{children:"msys2-w64 packages/channels on Anaconda Cloud"}),"\n",(0,i.jsx)(n.li,{children:"OpenBLAS... does seem to be working on Windows"}),"\n",(0,i.jsx)(n.li,{children:"Does this work with VS 2015?"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Use ATLAS instead of OpenBLAS for windows numpy?"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"*   Would need to repackage binary ATLAS DLL\n"})}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Get some BLAS build even if it is not the best"}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"How are SciPy Windows wheels being built?"}),"\n"]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,o.a)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(a,{...e})}):a(e)}},11151:(e,n,s)=>{s.d(n,{Z:()=>c,a:()=>l});var i=s(67294);const o={},r=i.createContext(o);function l(e){const n=i.useContext(r);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:l(e.components),i.createElement(r.Provider,{value:n},e.children)}}}]);