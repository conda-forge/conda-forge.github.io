"use strict";(self.webpackChunkcf_infra_docs=self.webpackChunkcf_infra_docs||[]).push([[249],{76630:(e,n,o)=>{o.r(n),o.d(n,{assets:()=>c,contentTitle:()=>d,default:()=>h,frontMatter:()=>r,metadata:()=>t,toc:()=>a});const t=JSON.parse('{"id":"how-to/basics/rerender","title":"How to rerender a feedstock","description":"Rerendering is the process of regenerating the templated contents of your feedstock, according to the contents of conda-forge.yml and the recipe itself.","source":"@site/docs/how-to/basics/rerender.md","sourceDirName":"how-to/basics","slug":"/how-to/basics/rerender","permalink":"/docs/how-to/basics/rerender","draft":false,"unlisted":false,"editUrl":"https://github.com/conda-forge/conda-forge.github.io/tree/refs/heads/main/docs/how-to/basics/rerender.md","tags":[{"inline":true,"label":"how-to","permalink":"/docs/tags/how-to"},{"inline":true,"label":"basic","permalink":"/docs/tags/basic"}],"version":"current","lastUpdatedAt":1767361735000,"frontMatter":{"tags":["how-to","basic"]},"sidebar":"diataxis","previous":{"title":"Basics","permalink":"/docs/how-to/basics"},"next":{"title":"Keep your fork in sync","permalink":"/docs/how-to/basics/fork-sync"}}');var i=o(74848),s=o(28453);const r={tags:["how-to","basic"]},d="How to rerender a feedstock",c={},a=[{value:"With bot commands",id:"with-bot-commands",level:2},{value:"With <code>conda-smithy</code>",id:"with-conda-smithy",level:2},{value:"1. Prepare the forked feedstock",id:"1-prepare-the-forked-feedstock",level:3},{value:"2a. Rerender with <code>conda_install_tool: pixi</code>",id:"2a-rerender-with-conda_install_tool-pixi",level:3},{value:"2b. Rerender with other <code>conda_install_tool</code> settings",id:"2b-rerender-with-other-conda_install_tool-settings",level:3},{value:"3. Commit and push the results to a new pull request",id:"3-commit-and-push-the-results-to-a-new-pull-request",level:3},{value:"Troubleshooting",id:"troubleshooting",level:3},{value:"New conda-smithy version available",id:"new-conda-smithy-version-available",level:4}];function l(e){const n={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",ul:"ul",...(0,s.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"how-to-rerender-a-feedstock",children:"How to rerender a feedstock"})}),"\n",(0,i.jsxs)(n.p,{children:["Rerendering is the process of regenerating the templated contents of your feedstock, according to the contents of ",(0,i.jsx)(n.code,{children:"conda-forge.yml"})," and the recipe itself."]}),"\n",(0,i.jsxs)(n.admonition,{title:"When to rerender",type:"tip",children:[(0,i.jsx)(n.p,{children:"We need to re-render when there are changes in the following parts of the feedstock:"}),(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Platform configuration (",(0,i.jsx)(n.code,{children:"skip"})," sections)."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"yum_requirements.txt"})," or ",(0,i.jsx)(n.code,{children:"conda-forge.yml"}),"."]}),"\n",(0,i.jsx)(n.li,{children:"Updates in the build matrix due to new versions of Python, NumPy, PERL, R, etc."}),"\n",(0,i.jsx)(n.li,{children:"Updates in conda-forge pinning that affect the feedstock."}),"\n",(0,i.jsxs)(n.li,{children:["Build issues that a feedstock configuration update will fix (follow us on ",(0,i.jsx)(n.a,{href:"https://conda-forge.zulipchat.com/",children:"Zulip"})," to know about those)."]}),"\n"]})]}),"\n",(0,i.jsx)(n.p,{children:"There are two ways of rerendering a feedstock:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Via bot commands on the feedstock issue tracker"}),"\n",(0,i.jsxs)(n.li,{children:["Using ",(0,i.jsx)(n.code,{children:"conda-smithy"})," locally"]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"with-bot-commands",children:"With bot commands"}),"\n",(0,i.jsxs)(n.p,{children:["Simply open a new issue in the feedstock titled ",(0,i.jsx)(n.code,{children:"@conda-forge-admin, please rerender"}),". The description can be left empty. A new PR will be opened after a few seconds, and will receive a new commit with the rerendered changes within minutes."]}),"\n",(0,i.jsxs)(n.h2,{id:"with-conda-smithy",children:["With ",(0,i.jsx)(n.code,{children:"conda-smithy"})]}),"\n",(0,i.jsxs)(n.p,{children:["Behind the bot command, our automation ran ",(0,i.jsx)(n.code,{children:"conda-smithy rerender"})," on your feedstock and published the changes. You can also do this locally."]}),"\n",(0,i.jsx)(n.h3,{id:"1-prepare-the-forked-feedstock",children:"1. Prepare the forked feedstock"}),"\n",(0,i.jsxs)(n.p,{children:["If you haven't already, fork the feedstock to your personal account. Then clone the fork to disk and ",(0,i.jsxs)(n.a,{href:"/docs/how-to/basics/fork-sync",children:["create a fresh branch out of your synced ",(0,i.jsx)(n.code,{children:"main"})]}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"cd name-feedstock\ngit checkout main\ngit pull upstream main\ngit checkout -b rerender\n"})}),"\n",(0,i.jsxs)(n.p,{children:["Depending on your ",(0,i.jsx)(n.code,{children:"conda-forge.yml"})," configuration, from now on you will need to run different steps:"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Option A: With ",(0,i.jsx)(n.code,{children:"conda_install_tool: pixi"}),", you only need to install Pixi and run ",(0,i.jsx)(n.code,{children:"pixi run rerender"}),"."]}),"\n",(0,i.jsxs)(n.li,{children:["Option B: With other ",(0,i.jsx)(n.code,{children:"conda_install_tool"})," settings you need to install ",(0,i.jsx)(n.code,{children:"conda-smithy"})," on your own."]}),"\n"]}),"\n",(0,i.jsxs)(n.h3,{id:"2a-rerender-with-conda_install_tool-pixi",children:["2a. Rerender with ",(0,i.jsx)(n.code,{children:"conda_install_tool: pixi"})]}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["Download and install ",(0,i.jsx)(n.code,{children:"pixi"})," (check ",(0,i.jsx)(n.a,{href:"https://pixi.sh/latest/installation/",children:"their documentation"}),")."]}),"\n",(0,i.jsxs)(n.li,{children:["Go to the cloned repository and run ",(0,i.jsx)(n.code,{children:"pixi run rerender"}),"."]}),"\n"]}),"\n",(0,i.jsxs)(n.h3,{id:"2b-rerender-with-other-conda_install_tool-settings",children:["2b. Rerender with other ",(0,i.jsx)(n.code,{children:"conda_install_tool"})," settings"]}),"\n",(0,i.jsxs)(n.p,{children:["Create a new environment with ",(0,i.jsx)(n.code,{children:"conda-smithy"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"conda create -n conda-smithy -c conda-forge conda-smithy shellcheck\n"})}),"\n",(0,i.jsxs)(n.p,{children:["Activate it and run ",(0,i.jsx)(n.code,{children:"conda-smithy"})," from the cloned repository directory:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"conda activate conda-smithy\ncd name-feedstock\nconda-smithy rerender\n"})}),"\n",(0,i.jsx)(n.h3,{id:"3-commit-and-push-the-results-to-a-new-pull-request",children:"3. Commit and push the results to a new pull request"}),"\n",(0,i.jsxs)(n.p,{children:["Once the rerender is done, ",(0,i.jsx)(n.code,{children:"conda-smithy"})," will have added the rerender changes to the staging area of your repository and prepared a commit message for you. Use it to commit the changes and push the branch to your fork:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:'git commit -m "<copied message>"\ngit push -u origin rerender\n'})}),"\n",(0,i.jsx)(n.p,{children:"The git remote will suggest you to open a PR with the new changes. Follow that link and fill in the PR template."}),"\n",(0,i.jsx)(n.h3,{id:"troubleshooting",children:"Troubleshooting"}),"\n",(0,i.jsx)(n.h4,{id:"new-conda-smithy-version-available",children:"New conda-smithy version available"}),"\n",(0,i.jsx)(n.p,{children:"Please update your local conda-smithy version:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"conda update -n conda-smithy conda-smithy"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"pixi run --force-reinstall rerender"})}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:["If you are intentionally using an older version, then pass ",(0,i.jsx)(n.code,{children:"--no-check-uptodate"})," to `conda-smithy:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"conda-smithy rerender --no-check-uptodate\n"})})]})}function h(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(l,{...e})}):l(e)}},28453:(e,n,o)=>{o.d(n,{R:()=>r,x:()=>d});var t=o(96540);const i={},s=t.createContext(i);function r(e){const n=t.useContext(s);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:r(e.components),t.createElement(s.Provider,{value:n},e.children)}}}]);