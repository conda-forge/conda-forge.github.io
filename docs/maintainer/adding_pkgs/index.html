<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-maintainer/adding_pkgs" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.5.2">
<title data-rh="true">Contributing packages | conda-forge | community-driven packaging for conda</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://conda-forge.org/docs/maintainer/adding_pkgs/"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Contributing packages | conda-forge | community-driven packaging for conda"><meta data-rh="true" name="description" content="The contribution process can be broken down into three steps:"><meta data-rh="true" property="og:description" content="The contribution process can be broken down into three steps:"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://conda-forge.org/docs/maintainer/adding_pkgs/"><link data-rh="true" rel="alternate" href="https://conda-forge.org/docs/maintainer/adding_pkgs/" hreflang="en"><link data-rh="true" rel="alternate" href="https://conda-forge.org/docs/maintainer/adding_pkgs/" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://KB43FQOB7U-dsn.algolia.net" crossorigin="anonymous"><link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="conda-forge | community-driven packaging for conda RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="conda-forge | community-driven packaging for conda Atom Feed">



<link rel="search" type="application/opensearchdescription+xml" title="conda-forge | community-driven packaging for conda" href="/opensearch.xml">

<link rel="alternate" type="application/rss+xml" href="/news/rss.xml" title="conda-forge | community-driven packaging for conda RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/news/atom.xml" title="conda-forge | community-driven packaging for conda Atom Feed">


<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.1/css/all.min.css">
<script src="/js/count.js" defer="defer" data-goatcounter="https://conda-forge.goatcounter.com/count"></script><link rel="stylesheet" href="/assets/css/styles.e9e0aa1d.css">
<script src="/assets/js/runtime~main.db9927be.js" defer="defer"></script>
<script src="/assets/js/main.6481a3f7.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const n=new URLSearchParams(window.location.search).entries();for(var[t,e]of n)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.png" alt="conda-forge anvil logo without text" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/img/logo.png" alt="conda-forge anvil logo without text" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/">Docs</a><a class="navbar__item navbar__link" href="/community/">Community</a><a class="navbar__item navbar__link" href="/news/">News</a><a class="navbar__item navbar__link" href="/blog/">Blog</a><a class="navbar__item navbar__link" href="/status/">Status</a><a class="navbar__item navbar__link" href="/packages/">Packages</a><a class="navbar__item navbar__link" href="/download/">Download</a></div><div class="navbar__items navbar__items--right"><a href="https://opencollective.com/conda-forge" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Donate<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><a href="https://github.com/conda-forge" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link fab fa-lg fa-github" title="GitHub"></a><a href="https://conda-forge.zulipchat.com" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link fa-solid fa-comments" title="Zulip"></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20" aria-hidden="true"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/">conda-forge documentation</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/user/">User Documentation</a><button aria-label="Expand sidebar category &#x27;User Documentation&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" href="/docs/maintainer/">Maintainer Documentation</a><button aria-label="Collapse sidebar category &#x27;Maintainer Documentation&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/maintainer/infrastructure/">Infrastructure</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/maintainer/guidelines/">Guidelines</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/maintainer/adding_pkgs/">Contributing packages</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/maintainer/updating_pkgs/">Maintaining packages</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/maintainer/pinning_deps/">Pinned dependencies</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/maintainer/conda_forge_yml/">Configuring conda-forge.yml</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/maintainer/knowledge_base/">Knowledge Base</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/maintainer/maintainer_faq/">FAQ</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/docs/maintainer/understanding_conda_forge/">Understanding conda-forge</a><button aria-label="Expand sidebar category &#x27;Understanding conda-forge&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li></ul></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/glossary/">Glossary</a></li></ul></nav><button type="button" title="Collapse sidebar" aria-label="Collapse sidebar" class="button button--secondary button--outline collapseSidebarButton_PEFL"><svg width="20" height="20" aria-hidden="true" class="collapseSidebarButtonIcon_kv0_"><g fill="#7a7a7a"><path d="M9.992 10.023c0 .2-.062.399-.172.547l-4.996 7.492a.982.982 0 01-.828.454H1c-.55 0-1-.453-1-1 0-.2.059-.403.168-.551l4.629-6.942L.168 3.078A.939.939 0 010 2.528c0-.548.45-.997 1-.997h2.996c.352 0 .649.18.828.45L9.82 9.472c.11.148.172.347.172.55zm0 0"></path><path d="M19.98 10.023c0 .2-.058.399-.168.547l-4.996 7.492a.987.987 0 01-.828.454h-3c-.547 0-.996-.453-.996-1 0-.2.059-.403.168-.551l4.625-6.942-4.625-6.945a.939.939 0 01-.168-.55 1 1 0 01.996-.997h3c.348 0 .649.18.828.45l4.996 7.492c.11.148.168.347.168.55zm0 0"></path></g></svg></button></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/docs/maintainer/"><span itemprop="name">Maintainer Documentation</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Contributing packages</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><p><a id="dev-contribute-pkgs"></a></p>
<p><a id="contributing-packages"></a></p>
<header><h1>Contributing packages</h1></header>
<p>The contribution process can be broken down into three steps:</p>
<ul>
<li>
<p>Step 1. Staging process (add recipe and license).</p>
<p>With the help of <a href="#creating-recipes">the staging process</a>, add a package&#x27;s recipe and license to the <a href="https://github.com/conda-forge/staged-recipes" target="_blank" rel="noopener noreferrer">staged-recipes repository</a> and create a PR.</p>
</li>
<li>
<p>Step 2. Post staging process.</p>
<p>Once your PR, has been merged, take a look at our <a href="#post-staging-process">Post staging process</a> to know what follows.</p>
</li>
<li>
<p>Step 3. Maintaining the package.</p>
<p>Contributing a package to <code>conda-forge</code> makes you the maintainer of that package.
Learn more about the <a href="#maintainer-role">roles of a maintainer</a>.</p>
</li>
</ul>
<p>The sections below will add more details about each step.</p>
<p><a id="creating-recipes"></a></p>
<p><a id="the-staging-process"></a></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="the-staging-process">The staging process<a href="#the-staging-process" class="hash-link" aria-label="Direct link to The staging process" title="Direct link to The staging process">​</a></h2>
<p>The staging process i.e adding a package&#x27;s recipe has three steps:</p>
<ol>
<li>Generating the recipe</li>
<li>Checklist</li>
<li>Feedback and revision</li>
</ol>
<p><a id="generating-the-recipe"></a></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="generating-the-recipe">Generating the recipe<a href="#generating-the-recipe" class="hash-link" aria-label="Direct link to Generating the recipe" title="Direct link to Generating the recipe">​</a></h3>
<p>There are, currently, three ways to generate a recipe:</p>
<ol>
<li>
<p>If it is an R package from <a href="https://cran.r-project.org/" target="_blank" rel="noopener noreferrer">CRAN</a>, kindly
start by using the <a href="https://github.com/bgruening/conda_r_skeleton_helper" target="_blank" rel="noopener noreferrer">conda-forge helper script for R recipes</a> instead.
Then if necessary, you can make manual edits to the recipe.</p>
</li>
<li>
<p>If it is a python package, you can generate the recipe as a starting point with <code>grayskull</code>.</p>
<div class="theme-admonition theme-admonition-note admonition_xJq3 alert alert--secondary"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_BuS1"><p><a href="https://github.com/conda-incubator/grayskull" target="_blank" rel="noopener noreferrer">Grayskull</a> is an automatic conda recipe generator. The goal of this project is to generate concise recipes
for conda-forge and eventually replace conda skeleton. Presently, Grayskull can generate recipes for Python packages available on PyPI and also those not published on PyPI and only available as GitHub repositories.</p><p>Installation and usage of <code>grayskull</code>:</p><ul>
<li>Create a new environment using : <code>conda create --name MY_ENV</code>. Replace <code>MY_ENV</code> with the environment name.</li>
<li>Activate this new environment : <code>conda activate MY_ENV</code>.</li>
<li>Run <code>conda install -c conda-forge grayskull</code> to install <code>grayskull</code>.</li>
<li>Followed by <code>grayskull pypi --strict-conda-forge YOUR_PACKAGE_NAME</code> to generate the recipe. Replace <code>YOUR_PACKAGE_NAME</code> with the package name.</li>
</ul></div></div>
<p>You do <em>not</em> necessarily have to use <code>grayskull</code>, and the recipes produced by <code>grayskull</code> might need to be reviewed and edited.
Read more about <code>grayskull</code> and how to use it <a href="https://github.com/conda-incubator/grayskull#introduction" target="_blank" rel="noopener noreferrer">here</a>.</p>
</li>
<li>
<p>If it&#x27;s none of the above, generate a recipe with the help of <a href="https://github.com/conda-forge/staged-recipes/tree/master/recipes/example" target="_blank" rel="noopener noreferrer">the example recipe</a> in the <a href="https://github.com/conda-forge/staged-recipes" target="_blank" rel="noopener noreferrer">staged-recipes repository</a> and modify it as necessary.</p>
</li>
</ol>
<p>Your final recipe should have no comments (unless they&#x27;re actually relevant to the recipe, and not generic instruction comments), and follow the order in the example.</p>
<div class="theme-admonition theme-admonition-note admonition_xJq3 alert alert--secondary"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_BuS1"><p>If there are any details you are not sure about please create a pull request anyway. The conda-forge team will review it and help you make changes to it.</p></div></div>
<p>In case you are building your first recipe using conda-forge, a step-by-step instruction and checklist that will help you with a successful build is provided below.</p>
<p><a id="staging-steps"></a></p>
<p><a id="step-by-step-instructions"></a></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="step-by-step-instructions">Step-by-step Instructions<a href="#step-by-step-instructions" class="hash-link" aria-label="Direct link to Step-by-step Instructions" title="Direct link to Step-by-step Instructions">​</a></h3>
<ol>
<li>Ensure your source code can be downloaded as a single file. Source code
should be downloadable as an archive (.tar.gz, .zip, .tar.bz2, .tar.xz)
or tagged on GitHub, to ensure that it can be verified. (For further
detail, see <a href="#tarballs-no-repos">Build from tarballs, not repos</a>).</li>
<li>Fork and clone the <a href="https://github.com/conda-forge/staged-recipes" target="_blank" rel="noopener noreferrer">staged-recipes</a>
repository from GitHub.</li>
<li>Checkout a new branch from the staged-recipes <code>main</code> branch.</li>
<li>Through CLI, cd inside the ‘staged-recipes/recipes&#x27; directory.</li>
<li>Within your forked copy, create a new folder in the recipes folder for your package (i.e, <code>...staged-recipes/recipes/&lt;name-of-package&gt;</code>)</li>
<li>Copy <a href="https://github.com/conda-forge/staged-recipes/blob/master/recipes/example/meta.yaml" target="_blank" rel="noopener noreferrer">meta.yaml</a> from the example directory.
All the changes in the following steps will happen in the COPIED meta.yaml (i.e., <code>...staged-recipes/recipes/&lt;name-of-package&gt;/meta.yaml</code>).
Please leave the example directory unchanged!</li>
<li>Modify the copied recipe (meta.yml) as needed. To see how to modify meta.yaml, take a look at
<a href="#id4">The recipe meta.yaml</a>.</li>
<li>Generate the SHA256 key for your source code archive, as described in the
example recipe using the <code>openssl</code> tool. As an alternative, you can also
go to the package description on <a href="https://pypi.org" target="_blank" rel="noopener noreferrer">PyPi</a> from which you
can directly copy the SHA256.</li>
<li>Be sure to fill in the <code>test</code> section. The simplest test will simply
test that the module can be imported, as described in the example.</li>
<li>Remove all irrelevant comments in the <code>meta.yaml</code> file.</li>
</ol>
<div class="theme-admonition theme-admonition-tip admonition_xJq3 alert alert--success"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</div><div class="admonitionContent_BuS1"><p>Be sure not to checksum the redirection page. Therefore use, for example,:</p><div class="language-default codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-default codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">curl -sL https://github.com/username/reponame/archive/vX.X.X.tar.gz | openssl sha256</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div></div>
<p><a id="checklist"></a></p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="checklist">Checklist<a href="#checklist" class="hash-link" aria-label="Direct link to Checklist" title="Direct link to Checklist">​</a></h4>
<ul>
<li>Ensure that the license and license family descriptors (optional) have the right case and that the license is correct. Note that case sensitive inputs are required (e.g. Apache-2.0 rather than APACHE 2.0). Using SPDX identifiers for license field is recommended. (see <a href="#spdx">SPDX Identifiers and Expressions</a>)</li>
<li>Ensure that you have included a license file if your license requires one – most do. (see <a href="https://github.com/conda-forge/staged-recipes/blob/a504af81c05491bf7b0b018b2fa1efe64767985c/recipes/example/meta.yaml#L52-L55" target="_blank" rel="noopener noreferrer">here</a>)</li>
<li>In case your project has tests included, you need to decide if these tests should be executed while building the conda-forge feedstock.</li>
<li>Make sure that all tests pass successfully at least on your development machine.</li>
<li>Recommended: run the test locally on your source code to ensure the recipe works locally (see <a href="#staging-test-locally">Running tests locally for staged recipes</a>).</li>
<li>Make sure that your changes do not interfere with other recipes that are in the <code>recipes</code> folder (e.g. the <code>example</code> recipe).</li>
</ul>
<p><a id="feedback-and-revision"></a></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="feedback-and-revision">Feedback and revision<a href="#feedback-and-revision" class="hash-link" aria-label="Direct link to Feedback and revision" title="Direct link to Feedback and revision">​</a></h3>
<p>Once you finished your PR, all you have to do is wait for feedback from our review team.</p>
<p>The review team will assist you by pointing out improvements and answering questions. Once the package is ready, the reviewers will approve and merge your pull request.</p>
<p>After merging the <a href="/docs/glossary/#pr">PR</a>, our <a href="/docs/glossary/#ci">CI</a> infrastructure will build the package and make it available in the conda-channel.</p>
<div class="theme-admonition theme-admonition-note admonition_xJq3 alert alert--secondary"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_BuS1"><p>If you have questions or have not heard back for a while, you can notify us by including <code>@conda-forge/staged-recipes</code> in your GitHub message.</p></div></div>
<p><a id="post-staging-process"></a></p>
<p><a id="id1"></a></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="post-staging-process">Post staging process<a href="#post-staging-process" class="hash-link" aria-label="Direct link to Post staging process" title="Direct link to Post staging process">​</a></h2>
<ul>
<li>After the PR is merged, our <a href="/docs/glossary/#ci">CI</a> services will create a new git repo automatically. For example, the recipe for a package named <code>pydstool</code> will be moved to a new repository <a href="https://github.com/conda-forge/pydstool-feedstock" target="_blank" rel="noopener noreferrer">https://github.com/conda-forge/pydstool-feedstock</a>. This process is automated through a CI job on the <code>conda-forge/staged-recipes</code> repo. It sometimes fails due to API rate limits and will automatically retry itself. If your feedstock has not been created after a day or so, please get in touch with the <code>conda-forge/core</code> team for help.</li>
<li>CI services will be enabled automatically and a build will be triggered automatically which will build the conda package and upload to <a href="https://anaconda.org/conda-forge" target="_blank" rel="noopener noreferrer">https://anaconda.org/conda-forge</a></li>
<li>If this is your first contribution, you will be added to the conda-forge <a href="https://github.com/orgs/conda-forge/people" target="_blank" rel="noopener noreferrer">team</a> and given access to the CI services so that you can stop and restart builds. You will also be given commit rights to the new git repository.</li>
<li>If you want to make a change to the recipe, send a <a href="/docs/glossary/#pr">PR</a> to the git repository from a fork. Branches of the main repository are used for maintaining different versions only.</li>
</ul>
<p><a id="feedstock-repository-structure"></a></p>
<p><a id="id2"></a></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="feedstock-repository-structure">Feedstock repository structure<a href="#feedstock-repository-structure" class="hash-link" aria-label="Direct link to Feedstock repository structure" title="Direct link to Feedstock repository structure">​</a></h3>
<p>Once the PR containing the recipe for a package is merged in the <code>staged-recipes</code> repository, a new repository is created automatically called <code>&lt;package-name&gt;-feedstock</code>.
A feedstock is made up of a conda recipe (the instructions on what and how to build the package) and the necessary configuration files for automatic builds using freely available continuous integration (CI) services.</p>
<p>Each feedstock contains various files that are generated automatically using our automated provisioning tool <a href="https://github.com/conda-forge/conda-smithy/" target="_blank" rel="noopener noreferrer">conda-smithy</a>. Broadly every feedstock has the following files:</p>
<p><a id="recipe"></a></p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="recipe">recipe<a href="#recipe" class="hash-link" aria-label="Direct link to recipe" title="Direct link to recipe">​</a></h4>
<p>This folder contains the <code>meta.yaml</code> file and any other files/scripts needed to build the package.</p>
<p><a id="license-txt"></a></p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="licensetxt">LICENSE.txt<a href="#licensetxt" class="hash-link" aria-label="Direct link to LICENSE.txt" title="Direct link to LICENSE.txt">​</a></h4>
<p>This file is the license for the recipe itself. This license is different from the package license, which you define while submitting the package recipe using <code>license_file</code> in the <code>meta.yaml</code> file.</p>
<p><a id="ci-files"></a></p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="ci-files">CI-files<a href="#ci-files" class="hash-link" aria-label="Direct link to CI-files" title="Direct link to CI-files">​</a></h4>
<p>These are the CI configuration files for service providers like Azure and TravisCI.</p>
<p><a id="conda-forge-yml"></a></p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="conda-forgeyml">conda-forge.yml<a href="#conda-forgeyml" class="hash-link" aria-label="Direct link to conda-forge.yml" title="Direct link to conda-forge.yml">​</a></h4>
<p>This file is used to configure how the feedstock is set up and built. Making any changes in this file usually requires <a href="/docs/maintainer/updating_pkgs/#dev-update-rerender">Rerendering feedstocks</a>.</p>
<p><a id="maintainer-role"></a></p>
<p><a id="id3"></a></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="maintainer-role">Maintainer role<a href="#maintainer-role" class="hash-link" aria-label="Direct link to Maintainer role" title="Direct link to Maintainer role">​</a></h2>
<p>The maintainer&#x27;s job is to:</p>
<ul>
<li>Keep the feedstock updated by merging eventual maintenance <a href="/docs/glossary/#pr">PR</a>s from conda-forge&#x27;s bots.</li>
<li>Keep the feedstock on par with new releases of the source package by:
<ul>
<li>Bumping the version number and checksum.</li>
<li>Making sure that the feedstock&#x27;s requirements stay accurate.</li>
<li>Make sure the test requirements match those of the updated package.</li>
</ul>
</li>
<li>Answer eventual questions about the package on the feedstock issue tracker.</li>
</ul>
<p><a id="adding-multiple-packages-at-once"></a></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="adding-multiple-packages-at-once">Adding multiple packages at once<a href="#adding-multiple-packages-at-once" class="hash-link" aria-label="Direct link to Adding multiple packages at once" title="Direct link to Adding multiple packages at once">​</a></h3>
<p>If you would like to add more than one related packages, they can be added to
staged-recipes in a single pull request (in separate directories). If the
packages are interdependent (i.e. one package being added lists one or more of
the other packages being added as a requirement), the build script will be able to
locate the dependencies that are only present within staged-recipes as long as
the builds finish in the dependencies order. Using a single pull request
allows you to quickly get packages set up without waiting for each package in a
dependency chain to be reviewed, built, and added to the <code>conda-forge</code> channel
before starting the process over with the next recipe in the chain.</p>
<div class="theme-admonition theme-admonition-note admonition_xJq3 alert alert--secondary"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_BuS1"><p>When PRs with multiple interdependent recipes are merged,
there may be an error if a build finishes before its dependency is built. If
this occurs, you can trigger a new build by pushing an empty commit.</p><div class="language-none codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-none codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">git commit --amend --no-edit &amp;&amp; git push --force</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div></div>
<p><a id="synchronizing-fork-for-future-use"></a></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="synchronizing-fork-for-future-use">Synchronizing fork for future use<a href="#synchronizing-fork-for-future-use" class="hash-link" aria-label="Direct link to Synchronizing fork for future use" title="Direct link to Synchronizing fork for future use">​</a></h3>
<p>If you would like to add additional packages in the future, you will need to
reset your fork of staged-recipes before creating a new branch on your fork,
adding the new package directory/recipe, and creating a pull request. This
step ensures you have the most recent version of the tools and configuration
files contained in the staged-recipes repository and makes the pull request
much easier to review. The following steps will reset your fork of
staged-recipes and should be executed from within a clone of your forked
staged-recipes directory.</p>
<ol>
<li>Checkout your main branch:
<div class="language-default codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-default codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">git checkout main</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>Define the conda-forge/staged-recipes repository as <code>upstream</code> (if you have not already done so).:
<div class="language-default codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-default codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">git remote add upstream https://github.com/conda-forge/staged-recipes.git</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>Pull all of the upstream commits from the upstream main branch.:
<div class="language-default codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-default codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">git pull --rebase upstream main</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>Push all of the changes to your fork on GitHub (make sure there are not any changes on GitHub that you need because they will be overwritten).:
<div class="language-default codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-default codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">git push origin main --force</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
</ol>
<p>Once these steps are complete, you can continue with the steps in <a href="#staging-steps">Step-by-step Instructions</a> to stage your new package recipe using your existing staged-recipes fork.</p>
<p><a id="id4"></a></p>
<p><a id="the-recipe-meta-yaml"></a></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="the-recipe-metayaml">The recipe meta.yaml<a href="#the-recipe-metayaml" class="hash-link" aria-label="Direct link to The recipe meta.yaml" title="Direct link to The recipe meta.yaml">​</a></h2>
<p>The <code>meta.yaml</code> file in the recipe directory is at the heart of every conda package.
It defines everything that is required to build and use the package.</p>
<p><code>meta.yaml</code> is in <a href="https://en.wikipedia.org/wiki/YAML" target="_blank" rel="noopener noreferrer">yaml</a> format, augmented with <a href="http://jinja.pocoo.org/" target="_blank" rel="noopener noreferrer">Jinja</a> templating.</p>
<p>A full reference of the structure and fields of <code>meta.yaml</code> file can be found in the <a href="https://conda.io/projects/conda-build/en/stable/resources/define-metadata.html" target="_blank" rel="noopener noreferrer">Defining metadata (meta.yaml)</a> section in the conda-build documentation.</p>
<p>In the following, we highlight particularly important and conda-forge specific information and guidelines, ordered by section in <code>meta.yaml</code>.</p>
<p><a id="meta-yaml-source"></a></p>
<p><a id="source"></a></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="source">Source<a href="#source" class="hash-link" aria-label="Direct link to Source" title="Direct link to Source">​</a></h3>
<p><a id="tarballs-no-repos"></a></p>
<p><a id="build-from-tarballs-not-repos"></a></p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="build-from-tarballs-not-repos">Build from tarballs, not repos<a href="#build-from-tarballs-not-repos" class="hash-link" aria-label="Direct link to Build from tarballs, not repos" title="Direct link to Build from tarballs, not repos">​</a></h4>
<p>Packages should be built from tarballs using the <code>url</code> key, not from repositories directly by using e.g. <code>git_url</code>.</p>
<p>There are several reasons behind this rule:</p>
<ul>
<li>Repositories are usually larger than tarballs, draining shared CI time and bandwidth</li>
<li>Repositories are not checksummed. Thus, using a tarball has a
stronger guarantee that the download that is obtained to build from is
in fact the intended package.</li>
<li>On some systems, it is possible to not have permission to remove a repo once it is created.</li>
</ul>
<p><a id="populating-the-hash-field"></a></p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="populating-the-hash-field">Populating the <code>hash</code> field<a href="#populating-the-hash-field" class="hash-link" aria-label="Direct link to populating-the-hash-field" title="Direct link to populating-the-hash-field">​</a></h4>
<p>If your package is on <a href="https://pypi.org" target="_blank" rel="noopener noreferrer">PyPi</a>, you can get the sha256 hash from your package&#x27;s page
on PyPI; look for the <code>SHA256</code> link next to the download link on your package&#x27;s
files page, e.g. <code>https://pypi.org/project/&lt;your-project&gt;/#files</code>.</p>
<p>You can also generate a hash from the command line on Linux (and Mac if you
install the necessary tools below).</p>
<p>To generate the <code>sha256</code> hash: <code>openssl sha256 your_sdist.tar.gz</code></p>
<p>You may need the openssl package, available on conda-forge
<code>conda install openssl -c conda-forge</code>.</p>
<div class="theme-admonition theme-admonition-tip admonition_xJq3 alert alert--success"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</div><div class="admonitionContent_BuS1"><p>Be sure not to checksum the redirection page. Therefore use, for example,:</p><div class="language-default codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-default codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">curl -sL https://github.com/username/reponame/archive/vX.X.X.tar.gz | openssl sha256</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div></div>
<p><a id="downloading-extra-sources-and-data-files"></a></p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="downloading-extra-sources-and-data-files">Downloading extra sources and data files<a href="#downloading-extra-sources-and-data-files" class="hash-link" aria-label="Direct link to Downloading extra sources and data files" title="Direct link to Downloading extra sources and data files">​</a></h4>
<p><code>conda-build 3</code> supports multiple sources per recipe. Examples are available <a href="https://docs.conda.io/projects/conda-build/en/stable/resources/define-metadata.html#source-from-multiple-sources" target="_blank" rel="noopener noreferrer">in the conda-build docs</a>.</p>
<p><a id="build"></a></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="build">Build<a href="#build" class="hash-link" aria-label="Direct link to Build" title="Direct link to Build">​</a></h3>
<p><a id="skipping-builds"></a></p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="skipping-builds">Skipping builds<a href="#skipping-builds" class="hash-link" aria-label="Direct link to Skipping builds" title="Direct link to Skipping builds">​</a></h4>
<p>Use the <code>skip</code> key in the <code>build</code> section along with a selector:</p>
<p>You can e.g. specify not to build …</p>
<ul>
<li>on specific architectures:
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">build</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">skip</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean important" style="color:#36acaa">true</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># [win]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>for specific python versions:
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">build</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">skip</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean important" style="color:#36acaa">true</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># [py&lt;35]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
</ul>
<p>A full description of selectors is
<a href="https://docs.conda.io/projects/conda-build/en/stable/resources/define-metadata.html#preprocessing-selectors" target="_blank" rel="noopener noreferrer">in the conda docs</a>.</p>
<p><a id="optional-bld-bat-and-or-build-sh"></a></p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="optional-bldbat-andor-buildsh">Optional: <code>bld.bat</code> and/or <code>build.sh</code><a href="#optional-bldbat-andor-buildsh" class="hash-link" aria-label="Direct link to optional-bldbat-andor-buildsh" title="Direct link to optional-bldbat-andor-buildsh">​</a></h4>
<p>In many cases, <code>bld.bat</code> and/or <code>build.sh</code> files are not required.
Pure Python packages almost never need them.</p>
<p>If the build can be executed with one line, you may put this line in the
<code>script</code> entry of the <code>build</code> section of the <code>meta.yaml</code> file with:
<code>script: &quot;{{ PYTHON }} -m pip install . -vv&quot;</code>.</p>
<p>Remember to always add <code>pip</code> to the host requirements.</p>
<p><a id="use-pip"></a></p>
<p><a id="id6"></a></p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="use-pip">Use pip<a href="#use-pip" class="hash-link" aria-label="Direct link to Use pip" title="Direct link to Use pip">​</a></h4>
<p>Normally Python packages should use this line:</p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">build</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">script</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;{{ PYTHON }} -m pip install . -vv&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>as the installation script in the <code>meta.yml</code> file or <code>bld.bat/build.sh</code> script files,
while adding <code>pip</code> to the host requirements:</p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">requirements</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">host</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> pip</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>These options should be used to ensure a clean installation of the package without its
dependencies. This helps make sure that we&#x27;re only including this package,
and not accidentally bringing any dependencies along into the conda package.</p>
<p>Usually pure-Python packages only require <code>python</code>, <code>setuptools</code> and <code>pip</code>
as <code>host</code> requirements; the real package dependencies are only
<code>run</code> requirements.</p>
<p><a id="requirements"></a></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="requirements">Requirements<a href="#requirements" class="hash-link" aria-label="Direct link to Requirements" title="Direct link to Requirements">​</a></h3>
<p><a id="build-host-and-run"></a></p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="build-host-and-run">Build, host and run<a href="#build-host-and-run" class="hash-link" aria-label="Direct link to Build, host and run" title="Direct link to Build, host and run">​</a></h4>
<p>Conda-build distinguishes three different kinds of dependencies.
In the following paragraphs, we give a very short overview what packages go where.
For a detailed explanation please refer to the <a href="https://docs.conda.io/projects/conda-build/en/stable/resources/define-metadata.html#requirements-section" target="_blank" rel="noopener noreferrer">conda-build documentation</a>.</p>
<p><a id="id7"></a></p>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="build-1">Build<a href="#build-1" class="hash-link" aria-label="Direct link to Build" title="Direct link to Build">​</a></h5>
<p>Build dependencies are required in the build environment and contain all tools that are not needed on the host of the package.</p>
<p>Following packages are examples of typical <code>build</code> dependencies:</p>
<ul>
<li>compilers (see <a href="/docs/maintainer/knowledge_base/#dep-compilers">Compilers</a>)</li>
<li>cmake</li>
<li>make</li>
<li>pkg-config</li>
<li>CDT packages (see <a href="/docs/maintainer/knowledge_base/#cdt-packages">Core Dependency Tree Packages (CDTs)</a>)</li>
</ul>
<p><a id="host"></a></p>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="host">Host<a href="#host" class="hash-link" aria-label="Direct link to Host" title="Direct link to Host">​</a></h5>
<p>Host dependencies are required during build phase, but in contrast to build packages they have to be present on the host.</p>
<p>Following packages are typical examples for <code>host</code> dependencies:</p>
<ul>
<li>shared libraries (c/c++)</li>
<li>python/r libraries that link against c libraries (see e.g. <a href="/docs/maintainer/knowledge_base/#linking-numpy">Building Against NumPy</a>)</li>
<li>python, r-base</li>
<li>setuptools, pip (see <a href="#use-pip">Use pip</a>)</li>
</ul>
<p><a id="run"></a></p>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="run">Run<a href="#run" class="hash-link" aria-label="Direct link to Run" title="Direct link to Run">​</a></h5>
<p>Run dependencies are only required during run time of the package. Run dependencies typically include</p>
<ul>
<li>most python/r libraries</li>
</ul>
<p><a id="no-external-deps"></a></p>
<p><a id="avoid-external-dependencies"></a></p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="avoid-external-dependencies">Avoid external dependencies<a href="#avoid-external-dependencies" class="hash-link" aria-label="Direct link to Avoid external dependencies" title="Direct link to Avoid external dependencies">​</a></h4>
<p>As a general rule: all dependencies have to be packaged by conda-forge as well. This is necessary to assure <a href="/docs/glossary/#abi">ABI</a> compatibility for all our packages.</p>
<p>There are only a few exceptions to this rule:</p>
<ol>
<li>Some dependencies have to be satisfied with <a href="/docs/glossary/#cdt">CDT</a> packages (see <a href="/docs/maintainer/knowledge_base/#cdt-packages">Core Dependency Tree Packages (CDTs)</a>).</li>
<li>Some packages require root access (e.g. device drivers) that cannot be distributed by conda-forge. These dependencies should be avoided whenever possible.</li>
</ol>
<p><a id="pinning"></a></p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="pinning">Pinning<a href="#pinning" class="hash-link" aria-label="Direct link to Pinning" title="Direct link to Pinning">​</a></h4>
<p>Linking shared c/c++ libraries creates dependence on the <a href="/docs/glossary/#abi">ABI</a> of the library that was used at build time on the package.
The exposed interface changes when previously existing exposed symbols are deleted or modified in a newer version.</p>
<p>It is therefore crucial to ensure that only library versions with a compatible <a href="/docs/glossary/#abi">ABI</a> are used after linking.</p>
<p>In the best case, the shared library you depend on:</p>
<ul>
<li>defines a pin in the <a href="https://github.com/conda-forge/conda-forge-pinning-feedstock/blob/master/recipe/conda_build_config.yaml" target="_blank" rel="noopener noreferrer">list of globally pinned packages</a></li>
<li>exports its <a href="/docs/glossary/#abi">ABI</a> compatible requirements by defining <code>run_exports</code> in it&#x27;s meta.yaml</li>
</ul>
<p>In these cases you do not have to worry about version requirements:</p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">requirements</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># [...]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">host</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> readline</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> libpng</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>In other cases you have to specify <a href="/docs/glossary/#abi">ABI</a> compatible versions manually.</p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">requirements</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># [...]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">host</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> libawesome 1.1.*</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>For more information on pinning, please refer to <a href="/docs/maintainer/pinning_deps/#pinned-deps">Pinned dependencies</a>.</p>
<p><a id="constraining-packages-at-runtime"></a></p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="constraining-packages-at-runtime">Constraining packages at runtime<a href="#constraining-packages-at-runtime" class="hash-link" aria-label="Direct link to Constraining packages at runtime" title="Direct link to Constraining packages at runtime">​</a></h4>
<p>The <code>run_constrained</code> section allows defining restrictions on packages at runtime without depending on the package. It can be used to restrict allowed versions of optional dependencies and defining incompatible packages.</p>
<p><a id="defining-non-dependency-restrictions"></a></p>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="defining-non-dependency-restrictions">Defining non-dependency restrictions<a href="#defining-non-dependency-restrictions" class="hash-link" aria-label="Direct link to Defining non-dependency restrictions" title="Direct link to Defining non-dependency restrictions">​</a></h5>
<p>Imagine a package can be used together with version 1 of <code>awesome-software</code> when present, but does not strictly depend on it.
Therefore you would like to let the user choose whether he/she would like to use the package with or without <code>awesome-software</code>. Let&#x27;s assume further that the package is incompatible to version 2 of <code>awesome-software</code>.</p>
<p>In this case <code>run_constrained</code> can be used to restrict <code>awesome-software</code> to version 1.*, if the user chooses to install it:</p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">requirements</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># [...]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">run_constrained</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> awesome</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">software 1.*</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Here <code>run_constrained</code> acts as a means to protect users from incompatible versions without introducing an unwanted dependency.</p>
<p><a id="defining-conflicts"></a></p>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="defining-conflicts">Defining conflicts<a href="#defining-conflicts" class="hash-link" aria-label="Direct link to Defining conflicts" title="Direct link to Defining conflicts">​</a></h5>
<p>Sometimes packages interfere with each other and therefore only one of them can be installed at any time.
In combination with an unsatisfiable version, <code>run_constrained</code> can define blockers:</p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">package</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> awesome</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">db</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">requirements</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># [...]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">run_constrained</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> amazing</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">db ==9999999999</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>In this example, <code>awesome-db</code> cannot be installed together with <code>amazing-db</code> as there is no package <code>amazing-db-9999999999</code>.</p>
<p><a id="testing-in-recipes"></a></p>
<p><a id="test"></a></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="test">Test<a href="#test" class="hash-link" aria-label="Direct link to Test" title="Direct link to Test">​</a></h3>
<p>All recipes need tests. Here are some tips, tricks, and justifications.
How you should test depends on the type of package (python, c-lib,
command-line tool, … ), and what tests are available for that package.
But every conda package must have at least <em>some</em> tests.</p>
<p><a id="simple-existence-tests"></a></p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="simple-existence-tests">Simple existence tests<a href="#simple-existence-tests" class="hash-link" aria-label="Direct link to Simple existence tests" title="Direct link to Simple existence tests">​</a></h4>
<p>Sometimes defining tests seems to be hard, e.g. due to:</p>
<ul>
<li>tests for the underlying code base may not exist.</li>
<li>test suites may take too long to run on limited <a href="/docs/glossary/#ci">CI</a> infrastructure.</li>
<li>tests may take too much bandwidth.</li>
</ul>
<p>In these cases, conda-forge may not be able to execute the prescribed test suite.</p>
<p>However, this is no reason for the recipe to not have tests. At the very least,
we want to verify that the package has installed the desired files in the desired
locations. This is called existence testing.</p>
<p>Existence testing can be accomplished in the <code>meta.yaml</code> file in the
<code>test/commands</code> block.</p>
<p>On posix systems, use the <code>test</code> utility and the <code>$PREFIX</code> variable.</p>
<p>On Windows, use the <code>exist</code> command. See below for an example.</p>
<p>Simple existence testing example:</p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">test</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">commands</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> test </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">f $PREFIX/lib/libboost_log$SHLIB_EXT  </span><span class="token comment" style="color:#999988;font-style:italic"># [unix]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> if not exist %LIBRARY_LIB%\\boost_log</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">vc140</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">mt.lib exit 1  </span><span class="token comment" style="color:#999988;font-style:italic"># [win]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><a id="testing-python-packages"></a></p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="testing-python-packages">Testing python packages<a href="#testing-python-packages" class="hash-link" aria-label="Direct link to Testing python packages" title="Direct link to Testing python packages">​</a></h4>
<p>For the best information about testing, see the conda build docs
<a href="https://docs.conda.io/projects/conda-build/en/stable/resources/define-metadata.html#test-section" target="_blank" rel="noopener noreferrer">test section.</a></p>
<p><a id="testing-importing"></a></p>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="testing-importing">Testing importing<a href="#testing-importing" class="hash-link" aria-label="Direct link to Testing importing" title="Direct link to Testing importing">​</a></h5>
<p>The minimal test of a python package should make sure that the package
can be successfully imported. This can be accomplished with this
stanza in the <code>meta.yaml</code>:</p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">test</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">imports</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> package_name</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Note that <code>package_name</code> is the name imported by python;
not necessarily the name of the conda package (they are sometimes different).</p>
<p>Testing for an import will catch the bulk of the packaging errors, generally
including the presence of dependencies. However, it does not assure that the
package works correctly. In particular, it doesn&#x27;t test if it works
correctly with the versions of dependencies used. In some cases, the top level
import name does not contain any executable code (e.g. a package with an empty
<code>__init__.py</code>, or without any direct imports). This test would always pass!
In these cases, it helps to add more imports explicitly targetting modules
that do contain executable code (e.g. <code>package_name.core</code>).</p>
<p>It is good to run some other tests of the code itself (the test suite) if possible.</p>
<p><a id="pip-check"></a></p>
<p><a id="id8"></a></p>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="pip-check">pip check<a href="#pip-check" class="hash-link" aria-label="Direct link to pip check" title="Direct link to pip check">​</a></h5>
<p>For PyPI packages, we strongly recommend including <code>pip check</code> as part of the <code>test.commands</code> section:</p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">test</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">commands</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> pip check</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>This command will check if all the dependencies specified in the Python
metadata are satisfied.</p>
<div class="theme-admonition theme-admonition-note admonition_xJq3 alert alert--secondary"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_BuS1"><p><code>pip check</code> can sometimes fail due to metadata discrepancies between
PyPI and conda-forge (e.g. same package with different names). In these
cases, the reviewer must evaluate whether the error was a false negative.
Tip: use <code>pip list</code> to show what <code>pip check</code> &quot;sees&quot;.</p></div></div>
<p><a id="running-unit-tests"></a></p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="running-unit-tests">Running unit tests<a href="#running-unit-tests" class="hash-link" aria-label="Direct link to Running unit tests" title="Direct link to Running unit tests">​</a></h4>
<p>The trick here is that there are multiple ways to run unit tests in Python,
including nose, pytest, etc.</p>
<p>Also, some packages install the tests with the package, and thus they can be
run in place, while others keep the tests with the source code, and thus can
not be run straight from an installed package.</p>
<p><a id="test-requirements"></a></p>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="test-requirements">Test requirements<a href="#test-requirements" class="hash-link" aria-label="Direct link to Test requirements" title="Direct link to Test requirements">​</a></h5>
<p>Sometimes there are packages required to run the tests that are not required
to simply use the package. This is usually a test-running framework, such as
nose or pytest. You can ensure that it is included by adding it to requirements
in the test stanza:</p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">test</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">imports</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> package_name</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">requires</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> pytest</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><a id="copying-test-files"></a></p>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="copying-test-files">Copying test files<a href="#copying-test-files" class="hash-link" aria-label="Direct link to Copying test files" title="Direct link to Copying test files">​</a></h5>
<p>Often test files are not installed alongside packages. Conda creates a fresh
working copy to execute the test stage of build recipes, which don&#x27;t contain
the files of source package.</p>
<p>You can include files required for testing with the <code>source_files</code> section:</p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">test</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">imports</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> package_name</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">requires</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> pytest</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">source_files</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> tests</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> test_pkg_integration.py</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">commands</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> pytest tests test_pkg_integration.py</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>The <code>source_files</code> section works for files and directories.</p>
<p><a id="built-in-tests"></a></p>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="built-in-tests">Built-in tests<a href="#built-in-tests" class="hash-link" aria-label="Direct link to Built-in tests" title="Direct link to Built-in tests">​</a></h5>
<p>Some packages have testing built-in. In this case, you can put a test command
directly in the test stanza:</p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">test</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">commands</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     python </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">c &quot;import package_name; package_name.tests.runall()&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Alternatively, you can add a file called <code>run_test.py</code> in the recipe that
will be run at test time. This allows an arbitrarily complicated test script.</p>
<p><a id="pytest-tests"></a></p>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="pytest-tests">pytest tests<a href="#pytest-tests" class="hash-link" aria-label="Direct link to pytest tests" title="Direct link to pytest tests">​</a></h5>
<p>If the tests are installed with the package, pytest can find and run them
for you with the following command:</p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">test</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">requires</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> pytest</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">commands</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> pytest </span><span class="token punctuation" style="color:#393A34">-</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">pyargs package_name</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><a id="command-line-utilities"></a></p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="command-line-utilities">Command Line Utilities<a href="#command-line-utilities" class="hash-link" aria-label="Direct link to Command Line Utilities" title="Direct link to Command Line Utilities">​</a></h4>
<p>If a python package installs command line utilities, you probably want to test that
they were properly installed:</p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">test</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">commands</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> util_1 </span><span class="token punctuation" style="color:#393A34">-</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">help</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>If the utility actually has a test mode, great. Otherwise simply invoking
<code>--help</code> or <code>--version</code> or something will at least test that it is
installed and can run.</p>
<p><a id="testing-r-packages"></a></p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="testing-r-packages">Testing R packages<a href="#testing-r-packages" class="hash-link" aria-label="Direct link to Testing R packages" title="Direct link to Testing R packages">​</a></h4>
<p>R packages should be tested for successful library loading. All
recipes for CRAN packages should begin from <a href="https://github.com/bgruening/conda_r_skeleton_helper" target="_blank" rel="noopener noreferrer">conda_r_skeleton_helper</a> and will
automatically include library loading tests. However, many R packages
also include <code>testthat</code> tests that can potentially be run. While
optional, additional testing is encouraged when packages:</p>
<ul>
<li>provide interaces to other (compiled) libraries (e.g., <code>r-curl</code>,
<code>r-xml2</code>)</li>
<li>extend functionality of or integrate many other R libraries
(e.g., <code>r-vetiver</code>)</li>
<li>are cornerstone R packages that provide often-used functions
(e.g., <code>r-rmarkdown</code>)</li>
</ul>
<p><a id="testing-r-library-loading"></a></p>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="testing-r-library-loading">Testing R library loading<a href="#testing-r-library-loading" class="hash-link" aria-label="Direct link to Testing R library loading" title="Direct link to Testing R library loading">​</a></h5>
<p>The minimal test of an R package should ensure that the delivered library
can be successfully imported. This is accomplished in the <code>meta.yaml</code>
with:</p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">test</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">commands</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> $R </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">e &quot;library(&#x27;PackageName&#x27;)&quot;           </span><span class="token comment" style="color:#999988;font-style:italic"># [not win]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;\&quot;%R%\&quot; -e \&quot;library(&#x27;PackageName&#x27;)\&quot;&quot;</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># [win]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Note that <code>PackageName</code> is the name imported by R; not necessarily
the name of the conda package (e.g., <code>r-matrix</code> delivers <code>Matrix</code>).</p>
<p><a id="running-testthat-tests"></a></p>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="running-testthat-tests">Running <code>testthat</code> tests<a href="#running-testthat-tests" class="hash-link" aria-label="Direct link to running-testthat-tests" title="Direct link to running-testthat-tests">​</a></h5>
<p>A typical <code>test</code> section for an R package with <code>testthat</code> testing
will look like</p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">test</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">requires</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> r</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">testthat</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">source_files</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> tests/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">commands</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> $R </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">e &quot;library(&#x27;PackageName&#x27;)&quot;                                                  </span><span class="token comment" style="color:#999988;font-style:italic"># [not win]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> $R </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">e &quot;testthat</span><span class="token punctuation" style="color:#393A34">:</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">test_file(&#x27;tests/testthat.R&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> stop_on_failure=TRUE)&quot;           </span><span class="token comment" style="color:#999988;font-style:italic"># [not win]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;\&quot;%R%\&quot; -e \&quot;library(&#x27;PackageName&#x27;)\&quot;&quot;</span><span class="token plain">                                         </span><span class="token comment" style="color:#999988;font-style:italic"># [win]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;\&quot;%R%\&quot; -e \&quot;testthat::test_file(&#x27;tests/testthat.R&#x27;, stop_on_failure=TRUE)\&quot;&quot;</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># [win]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<div class="theme-admonition theme-admonition-note admonition_xJq3 alert alert--secondary"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_BuS1"><p>We recommend including a library loading check <em>before</em> the <code>testthat</code>
tests.</p></div></div>
<p>First, one needs to declare that the test environment have <code>r-testthat</code>
installed. One may need additional requirements here, especially if a
package has optional functionality that is tested.</p>
<div class="theme-admonition theme-admonition-note admonition_xJq3 alert alert--secondary"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_BuS1"><p>If any <code>testthat</code> tests fail due to missing packages, maintainers
are encouraged to communicate this to the upstream repository. Some R
packages have optional functionality that usually involves packages
listed under the <code>Suggests:</code> section of the <code>DESCRIPTION</code> file.
Developers should be using <code>testthat::skip_if_not_installed()</code>
functions to guard against test failures when optional packages are
not installed. Posting an Issue or Pull Request when this is not
done will help improve testing practices in the R ecosystem.</p></div></div>
<p>Second, one needs to declare where to source the tests. R package tests will
be found in the <code>tests/</code> directory of the tarball. This will typically
include a <code>tests/testthat.R</code> file and additional tests under
<code>tests/testthat/test_*.R</code>. Auxiliary directories and files may also be
present and needed for specific tests.</p>
<p>The default R build procedure on conda-forge will not include the
<code>tests/</code> directory in the final build. While it is possible to do this
(via an <code>--install-tests</code> flag), it is preferable to use the
<code>tests.source_files</code> in the <code>meta.yaml</code> to copy the tests for the
testing phase only.</p>
<p>Finally, one uses the <code>testthat::test_file()</code> function to test the
<code>tests/testthat.R</code> file, which for most packages serves as the main entry
point for all the other tests. By default, this function does not return
an error value on test failures, so one needs to pass the argument
<code>stop_on_failure=TRUE</code> to ensure that test failures propagate to
conda-build.</p>
<p>There are scenarios where the <code>tests/testthat.R</code> file does not orchestrate
the individual tests. In that case, one can instead test the
<code>tests/testthat</code> directory with</p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">test</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">commands</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> $R </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">e &quot;testthat</span><span class="token punctuation" style="color:#393A34">:</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">test_dir(&#x27;tests/testthat/&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> package=&#x27;PackageName&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> load_package=&#x27;installed&#x27;)&quot;           </span><span class="token comment" style="color:#999988;font-style:italic"># [not win]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;\&quot;%R%\&quot; -e \&quot;testthat::test_dir(&#x27;tests/testthat/&#x27;, package=&#x27;PackageName&#x27;, load_package=&#x27;installed&#x27;)\&quot;&quot;</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># [win]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>In this case, the function will error on any failures by default. Again,
the <code>PackageName</code> here refers to the R library name.</p>
<p><a id="tests-outside-of-the-package"></a></p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="tests-outside-of-the-package">Tests outside of the package<a href="#tests-outside-of-the-package" class="hash-link" aria-label="Direct link to Tests outside of the package" title="Direct link to Tests outside of the package">​</a></h4>
<p>Note that conda-build runs the tests in an isolated environment after installing
the package – thus, at this point it does not have access to the original source
tarball. This is to ensure that the test environment is as close as possible to
what an end-user will see.</p>
<p>This makes it very hard to run tests that are not installed with the package.</p>
<p><a id="staging-test-locally"></a></p>
<p><a id="running-tests-locally-for-staged-recipes"></a></p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="running-tests-locally-for-staged-recipes">Running tests locally for staged recipes<a href="#running-tests-locally-for-staged-recipes" class="hash-link" aria-label="Direct link to Running tests locally for staged recipes" title="Direct link to Running tests locally for staged recipes">​</a></h4>
<p>If you want to run and build packages in the staged-recipes repository locally,
go to the root repository directory and run the
<code>build-locally.py</code> script (you need Python 3). And then you could follow the prompt to select the variant you&#x27;d like to build. This requires that you have Docker
installed on your machine if you are building a package for Linux.
For MacOS, it will prompt you to select a location for the SDK (e.g. <code>export OSX_SDK_DIR=/opt</code>) to be downloaded.</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token builtin class-name">cd</span><span class="token plain"> ~/staged-recipes</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ python build-locally.py</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>If you know which image you want to build, you can specify it as an argument to the script.</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token builtin class-name">cd</span><span class="token plain"> ~/staged-recipes</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ python build-locally.py </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">VARIANT</span><span class="token operator" style="color:#393A34">&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>where <code>&lt;VARIANT&gt;</code> is one of the file names in the <code>.ci_support/</code> directory, e.g. <code>linux64</code>, <code>osx64</code>, and <code>linux64_cuda102</code>.</p>
<p><a id="about"></a></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="about">About<a href="#about" class="hash-link" aria-label="Direct link to About" title="Direct link to About">​</a></h3>
<p><a id="packaging-the-license-manually"></a></p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="packaging-the-license-manually">Packaging the license manually<a href="#packaging-the-license-manually" class="hash-link" aria-label="Direct link to Packaging the license manually" title="Direct link to Packaging the license manually">​</a></h4>
<p>Sometimes upstream maintainers do not include a license file in their tarball despite being demanded by the license.</p>
<p>If this is the case, you can add the license to the <code>recipe</code> directory (here named <code>LICENSE.txt</code>) and reference it inside the meta.yaml:</p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">about</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">license_file</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> LICENSE.txt</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>In this case, please also notify the upstream developers that the license file is missing.</p>
<div class="theme-admonition theme-admonition-warning admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>Important</div><div class="admonitionContent_BuS1"><p>The license should only be shipped along with the recipe if there is no license file in the downloaded archive.
If there is a license file in the archive, please set <code>license_file</code> to the path of the license file in the archive.</p></div></div>
<p><a id="spdx"></a></p>
<p><a id="spdx-identifiers-and-expressions"></a></p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="spdx-identifiers-and-expressions">SPDX Identifiers and Expressions<a href="#spdx-identifiers-and-expressions" class="hash-link" aria-label="Direct link to SPDX Identifiers and Expressions" title="Direct link to SPDX Identifiers and Expressions">​</a></h4>
<p>For the <code>about: license</code> entry in the recipe <code>meta.yaml</code>, using a SPDX identifier or expression is recommended.</p>
<p>See <a href="https://spdx.org/licenses/" target="_blank" rel="noopener noreferrer">SPDX license identifiers</a> for the licenses.
See <a href="https://spdx.org/licenses/exceptions-index.html" target="_blank" rel="noopener noreferrer">SPDX license exceptions</a> for license exceptions.
See <a href="https://spdx.github.io/spdx-spec/v2.2.2/SPDX-license-expressions/" target="_blank" rel="noopener noreferrer">SPDX specification</a> Annex D
for the specification on expressions. Some examples of these are:</p>
<div class="language-none codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-none codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Apache-2.0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Apache-2.0 WITH LLVM-exception</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">BSD-3-Clause</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">BSD-3-Clause OR MIT</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">GPL-2.0-or-later</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">LGPL-2.0-only OR GPL-2.0-only</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">LicenseRef-HDF5</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">MIT</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">MIT AND BSD-2-Clause</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">PSF-2.0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Unlicense</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><a id="third-party-package-licenses"></a></p>
<p><a id="licenses-of-included-dependencies"></a></p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="licenses-of-included-dependencies">Licenses of included dependencies<a href="#licenses-of-included-dependencies" class="hash-link" aria-label="Direct link to Licenses of included dependencies" title="Direct link to Licenses of included dependencies">​</a></h4>
<p>For some languages (Go, rust, etc.), the current policy is to include all dependencies and their dependencies in the package.
This presents a problem when packaging the license files as each dependency needs to have its license file included in the recipe.</p>
<p>For some languages, the community provides tools which can automate this process, enabling the automatic inclusion of all needed license files.</p>
<p><a id="rust"></a></p>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="rust">Rust<a href="#rust" class="hash-link" aria-label="Direct link to Rust" title="Direct link to Rust">​</a></h5>
<p><a href="https://github.com/sstadick/cargo-bundle-licenses" target="_blank" rel="noopener noreferrer">cargo-bundle-licenses</a> can be included in the build process of a package and will automatically collect and add the license files of all dependencies of a package.</p>
<p>For a detailed description, please visit the project page but a short example can be found below.</p>
<p>First, include the collection of licenses as a step of the build process.</p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">build</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">number</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">script</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> cargo</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">bundle</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">licenses </span><span class="token punctuation" style="color:#393A34">-</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">format yaml </span><span class="token punctuation" style="color:#393A34">-</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">output THIRDPARTY.yml</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> build_command_goes_here</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Then, include the tool as a build time dependency.</p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">requirements</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">build</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> cargo</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">bundle</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">licenses</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Finally, make sure that the generated file is included in the recipe.</p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">about</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">license_file</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> THIRDPARTY.yml</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> package_license.txt</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><a id="Go"></a></p>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="go">Go<a href="#go" class="hash-link" aria-label="Direct link to Go" title="Direct link to Go">​</a></h5>
<p><a href="https://github.com/google/go-licenses" target="_blank" rel="noopener noreferrer">go-licenses</a> can be included in the build process of a package and will automatically collect and add the license files of all dependencies of a package.</p>
<p>For a detailed description, please visit the project page but a short example can be found below.</p>
<p>First, include the collection of licenses as a step of the build process.</p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">build</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">number</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">script</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> go build </span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">...</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> go</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">licenses save . </span><span class="token punctuation" style="color:#393A34">-</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">save_path=&quot;./license</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">files/&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Then, include the tool as a build time dependency.</p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">requirements</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">build</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> compiler(&#x27;go&#x27;) </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> go</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">licenses</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Finally, make sure that the generated file is included in the recipe.</p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">about</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">license_file</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> LICENSE</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> license</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">files/</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<div class="theme-admonition theme-admonition-warning admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>Important</div><div class="admonitionContent_BuS1"><p>We are not lawyers and cannot guarantee that the above advice is correct or that the tools are able to find all license files.
Additionally, we are unable to accept any responsibility or liability.
It is always your responsibility to double-check that all licenses are included and verify that any generated output is correct.</p></div></div>
<div class="theme-admonition theme-admonition-note admonition_xJq3 alert alert--secondary"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_BuS1"><p>The correct and automated packaging of dependency licenses is an <a href="https://github.com/conda-forge/conda-forge.github.io/issues/1052" target="_blank" rel="noopener noreferrer">ongoing discussion</a>. Please feel free to add your thoughts.</p></div></div>
<p><a id="extra"></a></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="extra">Extra<a href="#extra" class="hash-link" aria-label="Direct link to Extra" title="Direct link to Extra">​</a></h3>
<p><a id="recipe-maintainer"></a></p>
<p><a id="id9"></a></p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="recipe-maintainer">Recipe Maintainer<a href="#recipe-maintainer" class="hash-link" aria-label="Direct link to Recipe Maintainer" title="Direct link to Recipe Maintainer">​</a></h4>
<p>A maintainer is an individual who is responsible for maintaining and updating one or more feedstock repositories and packages as well as their future versions. They have push access to the feedstock repositories of only the packages they maintain and can merge pull requests into it.</p>
<p>Contributing a recipe for package makes you the <code>maintainer</code> of that package automatically.
See <a href="#maintainer-role">Maintainer role</a> and <a href="/docs/maintainer/updating_pkgs/#maintaining-pkgs">Maintaining packages</a> to learn more about what are the things that maintainers do.
If you wish to be a maintainer of a certain package, you should contact current maintainers and open an issue in that package&#x27;s feedstock with the following command:</p>
<p><code>@conda-forge-admin, please add user @username</code></p>
<p>where username is the GitHub username of the new maintainer to be added. Please refer to <a href="/docs/maintainer/guidelines/#becoming-a-maintainer">Becoming a maintainer</a> and <a href="/docs/maintainer/updating_pkgs/#maint-updating-maintainers">Updating the maintainer list</a> for detailed instructions.</p>
<p><a id="feedstock-name"></a></p>
<p><a id="id10"></a></p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="feedstock-name">Feedstock name<a href="#feedstock-name" class="hash-link" aria-label="Direct link to Feedstock name" title="Direct link to Feedstock name">​</a></h4>
<p>If you want the name of the feedstock to be different from the package name in the staged-recipes, you can use the <code>feedstock-name</code> directive in the recipe of that package, like this:</p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">extra</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">feedstock-name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> &lt;name</span><span class="token punctuation" style="color:#393A34">&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Here, <code>&lt;name&gt;</code> is the name you would want for the feedstock.
If not specified, the name will be taken from the top-level <code>name</code> field in <code>meta.yaml</code>.</p>
<p><a id="miscellaneous"></a></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="miscellaneous">Miscellaneous<a href="#miscellaneous" class="hash-link" aria-label="Direct link to Miscellaneous" title="Direct link to Miscellaneous">​</a></h2>
<p><a id="activate-scripts"></a></p>
<p><a id="id11"></a></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="activate-scripts">Activate scripts<a href="#activate-scripts" class="hash-link" aria-label="Direct link to Activate scripts" title="Direct link to Activate scripts">​</a></h3>
<p>Recipes are allowed to have activate scripts, which will be <code>source</code>d or
<code>call</code>ed when the environment is activated. It is generally recommended to avoid using
activate scripts when another option is possible because people do not always
activate environments the expected way and these packages may then misbehave.</p>
<p>When using them in a recipe, feel free to name them <code>activate.bat</code>,
<code>activate.sh</code>, <code>deactivate.bat</code>, and <code>deactivate.sh</code> in the recipe. The
installed scripts are recommended to be prefixed by the package name and a
separating <code>-</code>. Below is some sample code for Unix and Windows that will make
this install process easier. Please feel free to lift it.</p>
<p>In <code>build.sh</code>:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># Copy the [de]activate scripts to $PREFIX/etc/conda/[de]activate.d.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># This will allow them to be run on environment activation.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> </span><span class="token for-or-select variable" style="color:#36acaa">CHANGE</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">in</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;activate&quot;</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;deactivate&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">do</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">mkdir</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-p</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;</span><span class="token string variable" style="color:#36acaa">${PREFIX}</span><span class="token string" style="color:#e3116c">/etc/conda/</span><span class="token string variable" style="color:#36acaa">${CHANGE}</span><span class="token string" style="color:#e3116c">.d&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">cp</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;</span><span class="token string variable" style="color:#36acaa">${RECIPE_DIR}</span><span class="token string" style="color:#e3116c">/</span><span class="token string variable" style="color:#36acaa">${CHANGE}</span><span class="token string" style="color:#e3116c">.sh&quot;</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;</span><span class="token string variable" style="color:#36acaa">${PREFIX}</span><span class="token string" style="color:#e3116c">/etc/conda/</span><span class="token string variable" style="color:#36acaa">${CHANGE}</span><span class="token string" style="color:#e3116c">.d/</span><span class="token string variable" style="color:#36acaa">${PKG_NAME}</span><span class="token string" style="color:#e3116c">_</span><span class="token string variable" style="color:#36acaa">${CHANGE}</span><span class="token string" style="color:#e3116c">.sh&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">done</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>In <code>build.bat</code>:</p>
<div class="language-batch codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-batch codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token command keyword" style="color:#00009f">setlocal</span><span class="token command"> EnableDelayedExpansion</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">:: Copy the [de]activate scripts to %PREFIX%\etc\conda\[de]activate.d.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">:: This will allow them to be run on environment activation.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token command keyword" style="color:#00009f">for</span><span class="token command"> </span><span class="token command variable" style="color:#36acaa">%%F</span><span class="token command"> </span><span class="token command keyword" style="color:#00009f">in</span><span class="token command"> </span><span class="token command punctuation" style="color:#393A34">(</span><span class="token command">activate deactivate</span><span class="token command punctuation" style="color:#393A34">)</span><span class="token command"> </span><span class="token command keyword" style="color:#00009f">DO</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token command keyword" style="color:#00009f">if</span><span class="token command"> </span><span class="token command keyword" style="color:#00009f">not</span><span class="token command"> </span><span class="token command keyword" style="color:#00009f">exist</span><span class="token command"> </span><span class="token command variable" style="color:#36acaa">%PREFIX%</span><span class="token command">\etc\conda\</span><span class="token command variable" style="color:#36acaa">%%F</span><span class="token command">.d</span><span class="token plain"> </span><span class="token command keyword" style="color:#00009f">mkdir</span><span class="token command"> </span><span class="token command variable" style="color:#36acaa">%PREFIX%</span><span class="token command">\etc\conda\</span><span class="token command variable" style="color:#36acaa">%%F</span><span class="token command">.d</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token command keyword" style="color:#00009f">copy</span><span class="token command"> </span><span class="token command variable" style="color:#36acaa">%RECIPE_DIR%</span><span class="token command">\</span><span class="token command variable" style="color:#36acaa">%%F</span><span class="token command">.bat </span><span class="token command variable" style="color:#36acaa">%PREFIX%</span><span class="token command">\etc\conda\</span><span class="token command variable" style="color:#36acaa">%%F</span><span class="token command">.d\</span><span class="token command variable" style="color:#36acaa">%PKG_NAME%</span><span class="token command">_</span><span class="token command variable" style="color:#36acaa">%%F</span><span class="token command">.bat</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    :: Copy unix shell activation scripts, needed by Windows Bash users</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token command keyword" style="color:#00009f">copy</span><span class="token command"> </span><span class="token command variable" style="color:#36acaa">%RECIPE_DIR%</span><span class="token command">\</span><span class="token command variable" style="color:#36acaa">%%F</span><span class="token command">.sh </span><span class="token command variable" style="color:#36acaa">%PREFIX%</span><span class="token command">\etc\conda\</span><span class="token command variable" style="color:#36acaa">%%F</span><span class="token command">.d\</span><span class="token command variable" style="color:#36acaa">%PKG_NAME%</span><span class="token command">_</span><span class="token command variable" style="color:#36acaa">%%F</span><span class="token command">.sh</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><a id="jinja-templating"></a></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="jinja-templating">Jinja templating<a href="#jinja-templating" class="hash-link" aria-label="Direct link to Jinja templating" title="Direct link to Jinja templating">​</a></h3>
<p>The recipe <code>meta.yaml</code> can contain expressions that are evaluated during build time.
These expressions are written in <a href="http://jinja.pocoo.org/" target="_blank" rel="noopener noreferrer">Jinja</a> syntax.</p>
<p>Jinja expressions serve following purposes in the meta.yaml:</p>
<ul>
<li>
<p>They allow defining variables to avoid code duplication. Using a variable for the <code>version</code> allows changing the version only once with every update.</p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">% set version = &quot;3.7.3&quot; %</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">package</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> python</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">version</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> version </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">source</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">url</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> https</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">//www.python.org/ftp/python/</span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> version </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain">/Python</span><span class="token punctuation" style="color:#393A34">-</span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> version </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain">.tar.xz</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">sha256</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> da60b54064d4cfcd9c26576f6df2690e62085123826cff2e667e72a91952d318</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>They can call <a href="https://docs.conda.io/projects/conda-build/en/stable/resources/define-metadata.html#conda-build-specific-jinja2-functions" target="_blank" rel="noopener noreferrer">conda-build functions</a> for automatic code generation. Examples are the compilers, cdt packages or the <code>pin_compatible</code> function.</p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">requirements</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">build</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> compiler(&#x27;c&#x27;) </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> compiler(&#x27;cxx&#x27;) </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> cdt(&#x27;xorg</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">x11</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">proto</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">devel&#x27;) </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># [linux]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> cdt(&#x27;libx11</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">devel&#x27;) </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain">          </span><span class="token comment" style="color:#999988;font-style:italic"># [linux]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>or</p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">requirements</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">build</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> compiler(&#x27;c&#x27;) </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> compiler(&#x27;cxx&#x27;) </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">host</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> python</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> numpy</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">run</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> python</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> pin_compatible(&#x27;numpy&#x27;) </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
</ul>
<p>For more information please refer to the <a href="https://docs.conda.io/projects/conda-build/en/stable/resources/define-metadata.html#templating-with-jinja" target="_blank" rel="noopener noreferrer">Templating with Jinja</a> section in the conda-build docs.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col"><a href="https://github.com/conda-forge/conda-forge.github.io/tree/refs/heads/main/docs/maintainer/adding_pkgs.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"><span class="theme-last-updated">Last updated<!-- --> on <b><time datetime="2024-11-23T02:25:27.000Z" itemprop="dateModified">Nov 23, 2024</time></b></span></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/maintainer/guidelines/"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Guidelines</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/maintainer/updating_pkgs/"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Maintaining packages</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#the-staging-process" class="table-of-contents__link toc-highlight">The staging process</a><ul><li><a href="#generating-the-recipe" class="table-of-contents__link toc-highlight">Generating the recipe</a></li><li><a href="#step-by-step-instructions" class="table-of-contents__link toc-highlight">Step-by-step Instructions</a></li><li><a href="#feedback-and-revision" class="table-of-contents__link toc-highlight">Feedback and revision</a></li></ul></li><li><a href="#post-staging-process" class="table-of-contents__link toc-highlight">Post staging process</a><ul><li><a href="#feedstock-repository-structure" class="table-of-contents__link toc-highlight">Feedstock repository structure</a></li></ul></li><li><a href="#maintainer-role" class="table-of-contents__link toc-highlight">Maintainer role</a><ul><li><a href="#adding-multiple-packages-at-once" class="table-of-contents__link toc-highlight">Adding multiple packages at once</a></li><li><a href="#synchronizing-fork-for-future-use" class="table-of-contents__link toc-highlight">Synchronizing fork for future use</a></li></ul></li><li><a href="#the-recipe-metayaml" class="table-of-contents__link toc-highlight">The recipe meta.yaml</a><ul><li><a href="#source" class="table-of-contents__link toc-highlight">Source</a></li><li><a href="#build" class="table-of-contents__link toc-highlight">Build</a></li><li><a href="#requirements" class="table-of-contents__link toc-highlight">Requirements</a></li><li><a href="#test" class="table-of-contents__link toc-highlight">Test</a></li><li><a href="#about" class="table-of-contents__link toc-highlight">About</a></li><li><a href="#extra" class="table-of-contents__link toc-highlight">Extra</a></li></ul></li><li><a href="#miscellaneous" class="table-of-contents__link toc-highlight">Miscellaneous</a><ul><li><a href="#activate-scripts" class="table-of-contents__link toc-highlight">Activate scripts</a></li><li><a href="#jinja-templating" class="table-of-contents__link toc-highlight">Jinja templating</a></li></ul></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/docs/">Getting started</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/user/">User docs</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/maintainer/">Maintainer docs</a></li><li class="footer__item"><a class="footer__link-item" href="/community/cfep/">CFEPs</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/community/">About conda-forge</a></li><li class="footer__item"><a class="footer__link-item" href="/community/governance/">Governance</a></li><li class="footer__item"><a class="footer__link-item" href="/community/minutes/">Meeting minutes</a></li><li class="footer__item"><a class="footer__link-item" href="/community/getting-in-touch/">Get in touch</a></li></ul></div><div class="col footer__col"><div class="footer__title">Stay up-to-date</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/news/archive/">News</a></li><li class="footer__item"><a class="footer__link-item" href="/blog/archive/">Blog</a></li><li class="footer__item"><a class="footer__link-item" href="/status/">Status</a></li><li class="footer__item"><a href="https://twitter.com/condaforge" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">Resources</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/status/">Status</a></li><li class="footer__item"><a class="footer__link-item" href="/style-guide/">Style guide</a></li><li class="footer__item"><a href="https://github.com/conda-forge" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://conda-forge.zulipchat.com" target="_blank" rel="noopener noreferrer" class="footer__link-item">Zulip<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://conda.discourse.group/c/pkg-building/conda-forge/25" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discourse<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://stackoverflow.com/questions/tagged/conda-forge" target="_blank" rel="noopener noreferrer" class="footer__link-item">Stack Overflow<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2024 conda-forge · Built with Docusaurus</div></div></div></footer></div>
</body>
</html>